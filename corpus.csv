input_text,response
constructor,"html: 
css: 
js: const worker1 = setInterval(() => {
    if(typeof deeperInCodeFunctions.constructor === 'function') {
        window.dispatchEvent(new Event(""onWaitingForDeeperFictionsStart""));
        clearInterval(worker1);
    }
}, 1);"
"Today, the cargo today is valid until 14 o'clock on the cargo.","html: <span class=""dic-bugun-kargo""><i>Bugün Kargoda</i></span>
css: .dic-bugun-kargo {
    align-items: center;
    background: #cc0015;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    justify-content: center;
    padding: 5px 0;
    position: relative;
    text-align: center;
	transform: skew(-10deg);
    width: 45%;
}
.dic-bugun-kargo i {
    color: #fff;
	font-style: normal;
    font-size: 12px;
    font-weight: bold;
	transform: skew(10deg);
}

.bottom-badges .free-shipment {
    display: none !important;
}

@media screen and (max-width: 600px) {
    .dic-bugun-kargo i {
        font-size: 9px;
    }
}
js: // Javascript
const campaignName = 'fiction_' + Campaign.id;

if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
document.addEventListener(""onLoadingFinished"", async function() {
     if(await deeperInCode.limitExecutionByTime(1000)) return;
    deeperInCodeFunctions[campaignName]();
});
}

if (!window['isonSlideCarouselEventMounted_'+campaignName]) {
    window['isonSlideCarouselEventMounted_'+campaignName] = true;
    document.addEventListener(""onSlideCarousel"", async function() {
        // if(await deeperInCode.limitExecutionByTime(1000)) return;
        const worker = setInterval( function() {
            deeperInCodeFunctions[campaignName]();
        }, 1500);
        setTimeout(()=>{
            clearInterval(worker);
        },10000)
    });
}


if (!window['isOnPlpLoadNewItemsFinishedEventMounted_Mobile_'+campaignName]) {
    window['isOnPlpLoadNewItemsFinishedEventMounted_Mobile_'+campaignName] = true;
    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
        const worker = setInterval( function() {
            deeperInCodeFunctions[campaignName]();
        }, 1500);
        setTimeout(()=>{
            clearInterval(worker);
        },10000)
    });
}

"
Night Bird½ece Bird Campaign Badge,"html: <!-- Html -->
<span class=""dic-gece-kusu"">Gece Kuşu</span>
css: .dic-gece-kusu{
    background-color: #1c65cc;
    color: white;
    border-radius: 38px;
    padding: 5px 8px;
    display: inline-block;
    position: absolute;
    left: 20px;
    top: 10px;
    font-size: 16px;
    font-weight: bold;
}

js: // Javascript

// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    console.warn('found item')
                    $(this).find('.product-photo .photo-wrapper').append(codeHtml);
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    $(this).find('figure').append(codeHtml);
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }
}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                $('#product-sidebar .preview img').before(codeHtml)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                $('.pdp-slider .swiper-slide > figure').before(codeHtml)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            $(this).find('.product-image').append(codeHtml);
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""wawlabsLoadingFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    $(this).find('.photo-wrapper').prepend(codeHtml);
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                let link = $(this).find('a').attr('href')
                let pos = link.indexOf('.html')
                let currentItemSKU = parseInt(link.substr(pos-7,7))
                const wasNotAddedBefore = $(this).find('figure .dic-gece-kusu').length === 0;
                if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    $(this).find('figure').append(codeHtml);
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.swiper-container .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('figure').append(codeHtml);
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.base-info').append(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('figure').append(codeHtml);
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Badge Prioritization½This functionality will serve as a traffic police for the concerned campaigns which will order them according to their priorities,"html: <!-- Html -->
css: *{

}
js: // Javascript

function OnInit() {
    Campaign.isCheckOn.PlacesEnabled = false;
}

deeperInCode.badgeCampignPriority = {
    ""dic-ulusal"": 1,
    ""dic-tv-reklam"": 2,
    ""dic-club-ozel"": 3,
    ""dic-hediyeli-urun"": 4,
    ""dic-birlikte-al"": 5,
    ""dic-kuponlu-urun"": 6,
    ""dic-online-ozel"": 7,
    remove: ( _this_, className ) => {
        $(_this_).find(`.${className}`).remove()
    },
    getPriority: ( className ) => {
        return deeperInCode.badgeCampignPriority[className]
    },
    ""MAX_BADGE_COUNT"": 2
}

deeperInCode.injectBrutCSS(`
.dic-badge-container {
    margin: 0 !important;
    position: relative;
    z-index: 11;
}
.dic-badge-container span {
    position: absolute;
    top: 0px;
    left: 0px;
}
.dic-badge-container span:nth-child(2) {
    top: 55px;
}
.dic-badge-container span:nth-child(3) {
    top: 60px;
}
@media screen and (max-width: 650px) {
    .dic-badge-container span {
        font-size: 12px;
    }
}
`)
"
feature2½New feature,"html: <!-- Html -->
css: *{

}
js: // Javascript

function OnInit() {
    Campaign.isCheckOn.PlacesEnabled = false;
}

console.warn('deeper test bugün')
deeperInCode.injectBrutCSS(`
.dic-badge-container span {
    opacity: 1;
}
`)
"
DISCOUNT ATTENDEPET DISCOUNT CAMPAIGN IN BASKET,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 19.01.2024 22:00 – 20.01.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. 
            Kampanyaya dahil ürünler için sepette indirim oranı değişmektedir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
"Shipping Free ""","html: <span class=""dic-free-shipment""><i>Kargo Bedava</i></span>
css: .dic-free-shipment {
    align-items: center;
    background: #2c3f81;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    justify-content: center;
    padding: 5px 0;
    position: relative;
    text-align: center;
	transform: skew(-10deg) !important;
    width: 45%;
}

.dic-free-shipment i {
    color: #fff;
	font-style: normal;
    font-size: 12px;
    font-weight: bold;
	transform: skew(10deg);
}

.bottom-badges .free-shipment {
    display: none !important;
}

@media screen and (max-width: 575.98px) {
    .dic-free-shipment {
        width: 48%;
    }
    .dic-free-shipment i {
        font-size: 9px;
    }
}
@media (min-width: 576px) and (max-width: 767.98px) {
    .dic-free-shipment i {
        font-size: 9px;
    }
}
js: /* function OnInit() {
    Campaign.isCheckOn.PlacesEnabled = false;
}
let codeHtml = await ProcessHTML(false);


$(""ul.products-list > li"").each(function(i, v) {
    var pid = $(v).find("".photo"").data(""gtm-event-ext"");
    if (pid) {
        var item = window[pid];
        if (item && item.price && +item.price >= 500) {
            $(v)
                .find("".product-price"")
                .append(codeHtml);
        }
    }
});
*/

// Javascript

function OnInit() {
    Campaign.isCheckOn.PlacesEnabled = false;
}

const codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const thresholdPrice = 500;

function CategoryPageLogic() {
    if(deeperInCode.isCategoryPage || deeperInCode.isPFF) {
        deeperInCode.waitUntilFieldCreated('.bottom-badges').then( res => {
          if(res) {
            if(deeperInCode.isDesktop) { // Desktop
                $('#category .products-list>li .product-wrapper').each( function(){
                    let priceBrut = $(this).find('.price-box .price').text();
                    let comaPos = priceBrut.indexOf(',')
                    const price = parseFloat(priceBrut.substr(0, comaPos+2));
                    if( price >= thresholdPrice && $(this).find('.product-price .dic-free-shipment').length === 0 ) {
                        // $(this).find('.product-price').append(codeHtml);
                        $(this).find('.bottom-badges').append(codeHtml);
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                    document.addEventListener(""onLoadingFinished"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            } else { // Mobile & Application
                $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                    let priceBrut = $(this).find('.wrapper-price .price').text();
                    let comaPos = priceBrut.indexOf(',')
                    // const price = parseFloat(priceBrut.substr(0, comaPos+2));
                    const price = parseFloat(priceBrut);
                    if( price >= thresholdPrice && $(this).find('.product-teaser-details .dic-free-shipment').length === 0 ) {
                        // $(this).find('.product-teaser-details .wrapper-price').append(codeHtml);
                        // $(this).find('.product-teaser-details .wrapper-price').after(codeHtml);
                        // $(this).find('.product-teaser-details .dic-free-shipment').css('transform', 'translateY(-10px)');
                        $(this).find('.bottom-badges').append(codeHtml);
                        $(this).find('.bottom-badges .dic-free-shipment').css('transform', 'translateY(-10px)');
                    }
                    if (!window['isOnPlpLoadNewItemsFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnPlpLoadNewItemsFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
          }
        });
    }
  }


 // **************** Search Page **********************
 function SearchPageLogic() {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box .bottom-badges').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                       let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                       priceBrut+=',-';
                       let comaPos = priceBrut.indexOf(',')
                       const price = parseFloat(priceBrut.substr(0, comaPos+2));
                       if( price >= thresholdPrice && $(this).find('.bottom-badges .dic-free-shipment').length === 0 ) {
                         // $(this).find('.bottom .price-main').append(codeHtml);
                         // $(this).find('.bottom .price-main .dic-free-shipment').css('transform', 'translateY(-10px)');
                         $(this).find('.bottom-badges').append(codeHtml);
                       }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }

 // **************** Main Page **********************
 function MainPageLogic() {
     if(deeperInCode.isMainPage) {
         if(deeperInCode.isDesktop) { // Desktop
             deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid .base-info .bottom-badges').then( res => {
               if(res) {
                 $('.product-container .products-carousel.cf .pc-wrapper .products-grid .base-info').each( function(){
                     let priceBrut = $(this).find('.info-wrapper .price').text();
                     let comaPos = priceBrut.indexOf(',')
                     // const price = parseFloat(priceBrut.substr(0, comaPos+2));
                     const price = parseFloat(priceBrut);
                     if(price >= thresholdPrice && $(this).find('.bottom-badges .dic-free-shipment').length === 0){
                       $(this).find('.bottom-badges').append(codeHtml);
                     }
                 })
                 if (!window['isonSlideCarouselEventMounted_'+campaignName]) {
                     window['isonSlideCarouselEventMounted_'+campaignName] = true;
                     document.addEventListener(""onSlideCarousel"", async function() {
                         // if(await deeperInCode.limitExecutionByTime(1000)) return;
                         const worker = setInterval( function() {
                             deeperInCodeFunctions[campaignName]();
                         }, 1500);
                         setTimeout(()=>{
                             clearInterval(worker);
                         },10000)
                     });
                 }
               }
             });
         } else { // Mobile & Application
             deeperInCode.waitUntilFieldCreated('.swiper-slide .product-teaser-container .bottom-badges').then( res => {
               if(res) {
                 $('.swiper-slide .product-teaser-container').each( function(){
                     /* temprary code for disabling showing on other widgets*/
                     const isPrevDivMediamarktOneriyor = $(this).parent().parent().parent().parent().prev().find('p span').text() === 'MediaMarkt Öneriyor';
                     if (! isPrevDivMediamarktOneriyor ) return;
                     /* end of temporary code block */
                     let priceBrut = $(this).find('.wrapper-price .price').text();
                     let comaPos = priceBrut.indexOf(',')
                     // const price = parseFloat(priceBrut.substr(0, comaPos+2));
                     const price = parseFloat(priceBrut);
                     if(price >= thresholdPrice && $(this).find('.bottom-badges .dic-free-shipment').length === 0){
                       $(this).find('.bottom-badges').append(codeHtml);
                     }
                 })
                 if (!window['isonSlideCarouselEventMounted_'+campaignName]) {
                     window['isonSlideCarouselEventMounted_'+campaignName] = true;
                     document.addEventListener(""onSlideCarousel"", async function() {
                         // if(await deeperInCode.limitExecutionByTime(1000)) return;
                         const worker = setInterval( function() {
                             deeperInCodeFunctions[campaignName]();
                         }, 1500);
                         setTimeout(()=>{
                             clearInterval(worker);
                         },10000)
                     });
                 }
               }
             });
         }
     }
 }




CategoryPageLogic()
SearchPageLogic()
MainPageLogic()
"
"BAND BAND BAND BAND BANNER CAMPAIGN WITH BAND BANNER ""","html: <div id=""dic-campaign-container"">

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web’e Özel Sepette 3.000 TL’ye Varan İndirimler!</span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Web’e Özel Sepette 3.000 TL’ye Varan İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            •	Kampanya 26.03.2024 08:00-29.03.2024 07:30 tarihleri arasında mediamarkt.com.tr veya MediaMarkt mobil uygulaması üzerinden seçili ürünlerde geçerlidir.
•	Kampanya seçili ürünlerde geçerlidir
•	Kampanyadan kazanabileceğiniz maksimum indirim tutarı 3.000 TL’dir.
•	5.000-9.999 TL arası sepet tutarında indirim tutarı 250 TL, 10.000 TL-19.999 TL arası sepet tutarında indirim tutarı 600 TL, 20.000 TL-29.999 TL arası sepet tutarında indirim tutarı 1.500 TL, 30.000 TL ve üzeri sepet tutarında indirim tutarı 3.000 TL’dir.
•	Kampanya kapsamındaki hak nakit veya hediye kartı olarak talep edilemez.
•	Bu kampanya kapsamında verilen indirim ile diğer MediaMarkt CLUB avantajları ve Media Markt Turkey tarafından verilen diğer kampanyalar birleştirilemez.
•	MediaMarkt kampanya koşullarını değiştirme hakkını saklı tutmaktadır.
•	Kampanyadan bir müşteri yalnızca bir kere yararlanabilir.
•	MediaMarkt, Kampanya koşulları dışında oluşturulan siparişlerin veya toplu alım olduğu tespit edilen siparişlerin iptal hakkını saklı tutar.
•	Kampanya ürünleri stoklarla sınırlıdır. MediaMarkt kampanya koşullarını değiştirme hakkını saklı tutar.

    </section>
</div>
css: .dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #df0000 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
} 

.dic-banner .text {
    margin: auto 10%;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #fff;
    color: #000;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    box-shadow: 0 0 10px rgba(0, 0, 0, .3);
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        width: 100%;
    } 

    .dic-banner .text {
        margin: 0;
        line-height: 1;
        font-size: 16px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for the PDP page
 */

if(deeperInCode.isPDP) {
    const currentItemSKU = parseInt(deeperInCode.getProductSKU())
    if(deeperInCode.isDesktop) { // Desktop
        await deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav');
        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
            const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
            const discountAmount = parseFloat(productPrice)*currentPercentage/100;
            const resultedAmount = parseFloat(productPrice)-discountAmount;
            const jQueryBanner = $(banner);
            jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
            $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
            // binding the click event on the banner's button to its handler
            deeperInCode.SetPopupInnerHtml(popup)
            $('.dic-banner #show-details').click( function() {
                deeperInCode.SetPopupVisibility(true)
            // binding the click event on the popup's close button to its handler
            $('.dic-popup-basket-discount #close').click(function(){
                deeperInCode.SetPopupVisibility(false)
            })
            });
        }
    } else { // Mobile & Application
        await deeperInCode.waitUntilFieldCreated('.breadcrumb-list');
        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
            const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
            const discountAmount = parseFloat(productPrice)*currentPercentage/100;
            const resultedAmount = parseFloat(productPrice)-discountAmount;
            const jQueryBanner = $(banner);
            jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
            $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
            // binding the click event on the banner's button to its handler
            deeperInCode.SetPopupInnerHtml(popup)
            $('.dic-banner #show-details').click( function() {
                deeperInCode.SetPopupVisibility(true)
            // binding the click event on the popup's close button to its handler
            $('.dic-popup-basket-discount #close').click(function(){
                deeperInCode.SetPopupVisibility(false)
            })
            });
        }
    }
}


"
Badge 2½ Price Campaign Badge,"html: <!-- Start Html -->
<span 
    class=""dic-badge2-fiyat""
>
    badge 2
</span>
<!-- End Html -->
css: .dic-badge2-fiyat{
    background-color: #bebb19;
    color: white;
    border-radius: 38px;
    padding: 5px 8px;
    display: inline-block;
    position: absolute;
    left: 10px;
    top: 10px;
    font-size: 16px;
    font-weight: bold;
    opacity: 0;
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('priority fiction_'+Campaign.id+':',priority)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0 && $(_this_).find(badgeContainer+' .'+myClass).length === 0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 0;
        let max_prio_camp_class = myClass;
        // count the number of span (badges) in the badge container
        $(_this_).find(badgeSelector).each( function() {
            const curr_class = $(this).attr('class');
            const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
            if(curr_prio>max_prio_camp) {
                max_prio_camp = curr_prio;
                max_prio_camp_class = curr_class;
            }
            found_camp_count++;
        })
        if(priority<max_prio_camp) {
            $(_this_).find(badgeContainer).prepend(codeHtml);
        } else {
            $(_this_).find(badgeContainer).append(codeHtml);
        }
        if(found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
            deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
            const obj = {
              ""max_prio_camp_class"": max_prio_camp_class,
              ""id"": Campaign.id,
              ""this"": $(_this_)[0]
            }
            console.log(obj)
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    // $(this).find('.photo-wrapper').prepend(codeHtml);
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                let link = $(this).find('a').attr('href')
                let pos = link.indexOf('.html')
                let currentItemSKU = parseInt(link.substr(pos-7,7))
                const wasNotAddedBefore = $(this).find('figure .dic-gece-kusu').length === 0;
                if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    $(this).find('figure').append(codeHtml);
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.swiper-container .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('figure').append(codeHtml);
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.base-info').append(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('figure').append(codeHtml);
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
return;
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Badge 3½ Price Campaign Badge,"html: <!-- Start Html -->
<span 
    class=""dic-badge3-fiyat""
>
    badge 3
</span>
<!-- End Html -->
css: .dic-badge3-fiyat{
    background-color: #1945be;
    color: white;
    border-radius: 38px;
    padding: 5px 8px;
    display: inline-block;
    position: absolute;
    left: 10px;
    top: 10px;
    font-size: 16px;
    font-weight: bold;
    opacity: 0;
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('priority fiction_'+Campaign.id+':',priority)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0 && $(_this_).find(badgeContainer+' .'+myClass).length === 0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 0;
        let max_prio_camp_class = myClass;
        // count the number of span (badges) in the badge container
        $(_this_).find(badgeSelector).each( function() {
            const curr_class = $(this).attr('class');
            const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
            if(curr_prio>max_prio_camp) {
                max_prio_camp = curr_prio;
                max_prio_camp_class = curr_class;
            }
            found_camp_count++;
        })
        if(priority<max_prio_camp) {
            $(_this_).find(badgeContainer).prepend(codeHtml);
        } else {
            $(_this_).find(badgeContainer).append(codeHtml);
        }
        if(found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
            deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
            const obj = {
              ""max_prio_camp_class"": max_prio_camp_class,
              ""id"": Campaign.id,
              ""this"": $(_this_)[0]
            }
            console.log(obj)
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    // $(this).find('.photo-wrapper').prepend(codeHtml);
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                let link = $(this).find('a').attr('href')
                let pos = link.indexOf('.html')
                let currentItemSKU = parseInt(link.substr(pos-7,7))
                const wasNotAddedBefore = $(this).find('figure .dic-gece-kusu').length === 0;
                if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    $(this).find('figure').append(codeHtml);
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.swiper-container .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('figure').append(codeHtml);
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.base-info').append(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('figure').append(codeHtml);
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
return;
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Badge 1½ Price Campaign Badge,"html: <!-- Start Html -->
<span 
    class=""dic-badge1-fiyat""
>
    badge 1
</span>
<!-- End Html -->
css: .dic-badge1-fiyat{
    background-color: #b819be;
    color: white;
    border-radius: 38px;
    padding: 5px 8px;
    display: inline-block;
    position: absolute;
    left: 10px;
    top: 10px;
    font-size: 16px;
    font-weight: bold;
    opacity: 0;
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('priority fiction_'+Campaign.id+':',priority)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0 && $(_this_).find(badgeContainer+' .'+myClass).length === 0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 0;
        let max_prio_camp_class = myClass;
        // count the number of span (badges) in the badge container
        $(_this_).find(badgeSelector).each( function() {
            const curr_class = $(this).attr('class');
            const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
            if(curr_prio>max_prio_camp) {
                max_prio_camp = curr_prio;
                max_prio_camp_class = curr_class;
            }
            found_camp_count++;
        })
        if(priority<max_prio_camp) {
            $(_this_).find(badgeContainer).prepend(codeHtml);
        } else {
            $(_this_).find(badgeContainer).append(codeHtml);
        }
        if(found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
            deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
            const obj = {
              ""max_prio_camp_class"": max_prio_camp_class,
              ""id"": Campaign.id,
              ""this"": $(_this_)[0]
            }
            console.log(obj)
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    // $(this).find('.photo-wrapper').prepend(codeHtml);
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                let link = $(this).find('a').attr('href')
                let pos = link.indexOf('.html')
                let currentItemSKU = parseInt(link.substr(pos-7,7))
                const wasNotAddedBefore = $(this).find('figure .dic-gece-kusu').length === 0;
                if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    $(this).find('figure').append(codeHtml);
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.swiper-container .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('figure').append(codeHtml);
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.base-info').append(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('figure').append(codeHtml);
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
// return;
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Link Band Banner½linkli Band Banner Campaign,"html: <div id=""dic-campaign-container"">
    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Samsun Telefonlarda Büyük İndirim!</span>
        <a href=""https://www.mediamarkt.com.tr/tr/category/_samsung-telefon-796041.html"">
            Detaylar
        </a>
    </span>
</div>
css: .dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #df0000 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
} 

.dic-banner .text {
    margin: auto 10%;
}

.dic-banner a {
    margin: auto 8%;
    border-radius: 7px;
    padding: 0 20px;
    border: none;
    background-color: #fff;
    color: #000;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        width: 100%;
    } 

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
//const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for the PDP page
 */

if(deeperInCode.isPDP) {
    const currentItemSKU = parseInt(deeperInCode.getProductSKU())
    if(deeperInCode.isDesktop) { // Desktop
        await deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav');
        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
            const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
            const discountAmount = parseFloat(productPrice)*currentPercentage/100;
            const resultedAmount = parseFloat(productPrice)-discountAmount;
            const jQueryBanner = $(banner);
            jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
            $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
            // binding the click event on the banner's button to its handler
            //deeperInCode.SetPopupInnerHtml(popup)
            $('.dic-banner #show-details').click( function() {
                deeperInCode.SetPopupVisibility(true)
            // binding the click event on the popup's close button to its handler
            $('.dic-popup-basket-discount #close').click(function(){
                deeperInCode.SetPopupVisibility(false)
            })
            });
        }
    } else { // Mobile & Application
        await deeperInCode.waitUntilFieldCreated('.breadcrumb-list');
        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
            const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
            const discountAmount = parseFloat(productPrice)*currentPercentage/100;
            const resultedAmount = parseFloat(productPrice)-discountAmount;
            const jQueryBanner = $(banner);
            jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
            $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
            // binding the click event on the banner's button to its handler
            //deeperInCode.SetPopupInnerHtml(popup)
            $('.dic-banner #show-details').click( function() {
                deeperInCode.SetPopupVisibility(true)
            // binding the click event on the popup's close button to its handler
            $('.dic-popup-basket-discount #close').click(function(){
                deeperInCode.SetPopupVisibility(false)
            })
            });
        }
    }
}


"
"BAND BAND BAND BAND BANN CAMPAIGN WITHOUT BAND BANNER ""","html: <div id=""dic-campaign-container"">
    <!-- BANNER CODE -->
    <span class=""dic-kargo-bedava-banner"">
        <span class=""text"">Kargo Bedava!</span>
    </span>
</div>
css: .dic-kargo-bedava-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #2c3f81 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: center;
    border-radius: 10px;
} 

.dic-kargo-bedava-banner .text {
    margin: auto 10%;
}

@media screen and (max-width: 600px) {
    .dic-kargo-bedava-banner {
        font-size: 14px;
        width: 100%;
    } 

    .dic-kargo-bedava-banner .text {
        margin: 0;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const banner = $(codeHtml).find('.dic-kargo-bedava-banner')[0].outerHTML
//const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for the PDP page
 */

if(deeperInCode.isPDP) {
    const currentItemSKU = parseInt(deeperInCode.getProductSKU())
    if(deeperInCode.isDesktop) { // Desktop
        await deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav');
        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
            const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
            const discountAmount = parseFloat(productPrice)*currentPercentage/100;
            const resultedAmount = parseFloat(productPrice)-discountAmount;
            const jQueryBanner = $(banner);
            jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
            $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
            // binding the click event on the banner's button to its handler
            //deeperInCode.SetPopupInnerHtml(popup)
            $('.dic-banner #show-details').click( function() {
                deeperInCode.SetPopupVisibility(true)
            // binding the click event on the popup's close button to its handler
            $('.dic-popup-basket-discount #close').click(function(){
                deeperInCode.SetPopupVisibility(false)
            })
            });
        }
    } else { // Mobile & Application
        await deeperInCode.waitUntilFieldCreated('.breadcrumb-list');
        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
            const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
            const discountAmount = parseFloat(productPrice)*currentPercentage/100;
            const resultedAmount = parseFloat(productPrice)-discountAmount;
            const jQueryBanner = $(banner);
            jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
            $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
            // binding the click event on the banner's button to its handler
            //deeperInCode.SetPopupInnerHtml(popup)
            $('.dic-banner #show-details').click( function() {
                deeperInCode.SetPopupVisibility(true)
            // binding the click event on the popup's close button to its handler
            $('.dic-popup-basket-discount #close').click(function(){
                deeperInCode.SetPopupVisibility(false)
            })
            });
        }
    }
}


"
Yahya Basket Discount Test½Sepet discount campaign test,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Gece Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 19.01.2024 22:00 – 20.01.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. 
            Kampanyaya dahil ürünler için sepette indirim oranı değişmektedir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: rgb(11, 36, 255) !important;
    border-radius: 6px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: 25vh;
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isPLP || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = parseFloat(price)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',')
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = parseFloat(price)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = parseFloat(price)-discountAmount;
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = parseFloat(productPrice)-discountAmount;
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = parseFloat(productPrice)-discountAmount;
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = parseFloat(productPrice)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Burak,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Gündüz Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Gündüz Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 19.01.2024 22:00 – 20.01.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. 
            Kampanyaya dahil ürünler için sepette indirim oranı değişmektedir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: 25vh;
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isPLP || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = parseFloat(price)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',')
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = parseFloat(price)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = parseFloat(price)-discountAmount;
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = parseFloat(productPrice)-discountAmount;
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = parseFloat(productPrice)-discountAmount;
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = parseFloat(productPrice)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
National Campaign½ulusal Campaign Tag,"html: <!-- Start Html -->
<span class=""dic-ulusal""><i>ULUSAL<i><em></em></span>
<!-- End Html -->
css: .dic-ulusal {
    background-color: #be8cc0;
    color: white;
    border-radius: 25px;
    box-sizing: border-box;
    padding: 20px 0;
    line-height: 1;
    display: inline-block;
    height: 50px;
    width: 50px;
    position: absolute;
    left: 10px;
    top: 10px;
    font-size: 12px;
    font-weight: bold;
    text-align: center;
    opacity: 0;
    position: relative;
}
.dic-ulusal::before{
    content: '';
    background-color: #c26ac5;
    border-radius: 50%;
    height: 80%;
    width: 80%;
    position: absolute;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%);
    z-index: 1;
}
.dic-ulusal::after{
    content: '';
    background-color: #b819be;
    border-radius: 50%;
    height: 60%;
    width: 60%;
    position: absolute;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%);
    z-index: 2;
}
.dic-ulusal i{
    font-style: normal;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
    z-index: 3;
}
.dic-ulusal em{
    display: block;
    height: 16px;
    width: 16px;
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/ulusal.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: contain;
    position: absolute;
    left: 50%;
    top: 10px;
    transform: translateX(-50%);
    z-index: 3;
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Club Special offer½Club special offer campaign tag,"html: <!-- Start Html -->
<span class=""dic-club-ozel""></span>
<!-- End Html -->
css: .dic-club-ozel{
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/club_ozel.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-club-ozel {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
TV ADVERTISEMENT PRODUCT½TV ADVERTISING PRODUCT CAMPAIGN LABEL,"html: <!-- Start Html -->
<span class=""dic-tv-reklam""></span>
<!-- End Html -->
css: .dic-tv-reklam {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/tv_reklam_urunu.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-tv-reklam {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Basket discount test½Sepet discount campaign,"html: <!-- Start Html -->
<span class=""dic-online-ozel""></span>
<!-- End Html -->
css: .dic-online-ozel {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/online_ozel.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 0;
}
@media screen and (max-width: 600px) {
    .dic-online-ozel {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    deeperInCode.injectBrutCSS(`
    .seg-body .seg-slider li.slick-slide {
        padding-top: 10px!important;
    }
    `)
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Valentine_s days skin½kfşlkda gsşlk gkdsşlgkşldskşlgskşldfgds,"html: <!-- Html -->
css: *{

}
js: // Javascript
deeperInCode.injectBrutCSS(`
body {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/pageskin/pageskin.jpg);
    background-attachment: fixed;
    background-position: center;
    background-repeat: repeat-y;
    background-size: 100%;
}
`)"
Together Together Buy Campaign Tag,"html: <!-- Start Html -->
<span class=""dic-birlikte-al""></span>
<!-- End Html -->
css: .dic-birlikte-al {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/birlikte_al.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-birlikte-al {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
GIFT PRODUCT PRODUCT PRODUCT CAMPAIGN LABEL,"html: <!-- Start Html -->
<span class=""dic-hediyeli-urun""></span>
<!-- End Html -->
css: .dic-hediyeli-urun {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/hediyeli_urun.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-hediyeli-urun {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Product Campaign Campaign Tag,"html: <!-- Start Html -->
<span class=""dic-kuponlu-urun""></span>
<!-- End Html -->
css: .dic-kuponlu-urun {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/kuponlu_urun.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-kuponlu-urun {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Night Bird Product Sen,"html: <!-- Start Html -->
<span class=""dic-gece-kusu""></span>
<!-- End Html -->
css: .dic-gece-kusu {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/gece_kusu_urunu.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-gece-kusu {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
"Good price, Price Campaign Tag","html: <!-- Start Html -->
<span class=""dic-iyi-fiyat""></span>
<!-- End Html -->
css: .dic-iyi-fiyat {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/iyi_fiyat.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 0;
}
@media screen and (max-width: 600px) {
    .dic-iyi-fiyat {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
NEW PRODUCT NEW PRODUCT CAMPAIGN LABEL,"html: <!-- Start Html -->
<span class=""dic-yeni-urun""></span>
<!-- End Html -->
css: .dic-yeni-urun {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/yeni_urun.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 0;
}
@media screen and (max-width: 600px) {
    .dic-yeni-urun {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Online Private Products Notonline Special Product Campaign Tag,"html: <!-- Start Html -->
<span class=""dic-online-ozel""></span>
<!-- End Html -->
css: .dic-online-ozel {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/online_ozel.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-online-ozel {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track li.slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track li.slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Outlet Product plotter Product Price Campaign Tag,"html: <!-- Start Html -->
<span class=""dic-outlet-urun"">
</span>
<!-- End Html -->
css: .dic-outlet-urun {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/outlet_urun.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-outlet-urun {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(String(currentItemSKU)[0]==='3' || String(currentItemSKU)[0]==='5') {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Bahar is a special Badge fiction.,"html: <!-- Start Html -->
<span class=""dic-bahar-ozel""></span>
<!-- End Html -->
css: .dic-bahar-ozel {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/baharbadge.png);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 70px;
    width: 80px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-bahar-ozel {
        height: 65px;
        width: 70px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Today 2½ today in cargo cargo 2 campaign tags in cargo,"html: <!-- Start Html -->
<span class=""dic-bugun-kargo""><i>Bugün Kargoda</i></span>
<!-- End Html -->
css: .dic-bugun-kargo {
    align-items: center;
    background: #cc0015;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    justify-content: center;
    padding: 5px 0;
    position: relative;
    text-align: center;
	transform: skew(-10deg);
    width: 45%;
}
.dic-bugun-kargo i {
    color: #fff;
	font-style: normal;
    font-size: 12px;
    font-weight: bold;
	transform: skew(10deg);
}

.bottom-badges .free-shipment {
    display: none !important;
}

@media screen and (max-width: 575.98px) {
    .dic-bugun-kargo {
        width: 48%;
    }
    .dic-bugun-kargo i {
        font-size: 9px;
    }
}
@media (min-width: 576px) and (max-width: 767.98px) {
    .dic-bugun-kargo i {
        font-size: 9px;
    }
}
js: /* function OnInit() {
    Campaign.isCheckOn.PlacesEnabled = false;
}
let codeHtml = await ProcessHTML(false);


$(""ul.products-list > li"").each(function(i, v) {
    var pid = $(v).find("".photo"").data(""gtm-event-ext"");
    if (pid) {
        var item = window[pid];
        if (item && item.price && +item.price >= 500) {
            $(v)
                .find("".product-price"")
                .append(codeHtml);
        }
    }
});
*/

// Javascript

function OnInit() {
    Campaign.isCheckOn.PlacesEnabled = false;
}

const codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const thresholdPrice = 500;

let brandList = [""bosch"", ""siemens"", ""sıemens"", ""profilo"", ""profılo""];
let objectList = [
    ""çamaşır mak"",
    ""çamaşır-mak"",
    ""buzdolabı"",
    ""bulaşık"",
    ""kurutma mak"",
    ""kurutma-mak"",
    ""ocak"",
    ""fırın"",
    ""davlumbaz"",
    ""ankastre"",
    ""aspiratör"",
    ""dondurucu"",
];

function isItemExist(array, title) {
    return new Promise((resolve) => {
        array.forEach((el) => {
            if (title.toLowerCase().includes(el)) {
                resolve(true);
            }
            else if (title.toLowerCase().includes(encodeURIComponent(el))) {
                resolve(true);
            }
        });
        resolve(false);
    });
}

function CategoryPageLogic() {
    if(deeperInCode.isCategoryPage || deeperInCode.isPFF) {
        deeperInCode.waitUntilFieldCreated('.bottom-badges').then( res => {
          if(res) {
            if(deeperInCode.isDesktop) { // Desktop
                $('#category .products-list>li .product-wrapper').each( async function(){
                    const title = $(this).find('a').attr('href');
                    const bandExist = await isItemExist(brandList, title);
                    const objectExist = await isItemExist(objectList, title);
                    if( (!bandExist || !objectExist) && $(this).find('.product-price .dic-bugun-kargo').length === 0 ) {
                        // $(this).find('.product-price').append(codeHtml);
                        $(this).find('.bottom-badges').append(codeHtml);
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                    document.addEventListener(""onLoadingFinished"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            } else { // Mobile & Application
                $('.product-list>li.bg-white article.product-teaser-container').each( async function(){
                    const title = $(this).find('a').attr('href');
                    const bandExist = await isItemExist(brandList, title);
                    const objectExist = await isItemExist(objectList, title);
                    if( (!bandExist || !objectExist) && $(this).find('.product-teaser-details .dic-bugun-kargo').length === 0 ) {
                        // $(this).find('.product-teaser-details .wrapper-price').append(codeHtml);
                        // $(this).find('.product-teaser-details .wrapper-price').after(codeHtml);
                        // $(this).find('.product-teaser-details .dic-free-shipment').css('transform', 'translateY(-10px)');
                        $(this).find('.bottom-badges').append(codeHtml);
                        $(this).find('.bottom-badges .dic-free-shipment').css('transform', 'translateY(-10px)');
                    }
                    if (!window['isOnPlpLoadNewItemsFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnPlpLoadNewItemsFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
          }
        });
    }
  }


 // ****** Search Page ********
 function SearchPageLogic() {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box .bottom-badges').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( async function(){
                        const title = $(this).find('a:not("".add-to-wishlist"")').attr('href');
                        const bandExist = await isItemExist(brandList, title);
                        const objectExist = await isItemExist(objectList, title);
                        if( (!bandExist || !objectExist) && $(this).find('.bottom-badges .dic-bugun-kargo').length === 0 ) {
                            // $(this).find('.bottom .price-main').append(codeHtml);
                            // $(this).find('.bottom .price-main .dic-free-shipment').css('transform', 'translateY(-10px)');
                            $(this).find('.bottom-badges').append(codeHtml);
                        }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }

 // **************** Main Page **********************
 function MainPageLogic() {
     if(deeperInCode.isMainPage) {
         if(deeperInCode.isDesktop) { // Desktop
             deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid .base-info .bottom-badges').then( res => {
               if(res) {
                 $('.product-container .products-carousel.cf .pc-wrapper .products-grid .base-info').each( async function(){
                    // const title = $(this).find('a').attr('href');
                    const title = $(this).find('a').text();
                    const bandExist = await isItemExist(brandList, title);
                    const objectExist = await isItemExist(objectList, title);
                    if( (!bandExist || !objectExist) && $(this).find('.bottom-badges .dic-bugun-kargo').length === 0){
                       $(this).find('.bottom-badges').append(codeHtml);
                    }
                 })
                 if (!window['isonSlideCarouselEventMounted_'+campaignName]) {
                     window['isonSlideCarouselEventMounted_'+campaignName] = true;
                     document.addEventListener(""onSlideCarousel"", async function() {
                         // if(await deeperInCode.limitExecutionByTime(1000)) return;
                         const worker = setInterval( function() {
                             deeperInCodeFunctions[campaignName]();
                         }, 1500);
                         setTimeout(()=>{
                             clearInterval(worker);
                         },10000)
                     });
                 }
               }
             });
         } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-slide .product-teaser-container .bottom-badges').then( res => {
               if(res) {
                 $('.swiper-slide .product-teaser-container').each( async function(){
                    /* temprary code for disabling showing on other widgets*/
                    const isPrevDivMediamarktOneriyor = $(this).parent().parent().parent().parent().prev().find('p span').text() === 'MediaMarkt Öneriyor';
                    if (! isPrevDivMediamarktOneriyor ) return;
                    /* end of temporary code block */
                    // const title = $(this).find('a').attr('href');
                    const title = $(this).find('a').text();
                    const bandExist = await isItemExist(brandList, title);
                    const objectExist = await isItemExist(objectList, title);
                    if( (!bandExist || !objectExist) && $(this).find('.bottom-badges .dic-bugun-kargo').length === 0){
                       $(this).find('.bottom-badges').append(codeHtml);
                     }
                 })
                 if (!window['isonSlideCarouselEventMounted_'+campaignName]) {
                     window['isonSlideCarouselEventMounted_'+campaignName] = true;
                     document.addEventListener(""onSlideCarousel"", async function() {
                         // if(await deeperInCode.limitExecutionByTime(1000)) return;
                         const worker = setInterval( function() {
                             deeperInCodeFunctions[campaignName]();
                         }, 1500);
                         setTimeout(()=>{
                             clearInterval(worker);
                         },10000)
                     });
                 }
               }
            });
         }
     }
 }

// **************** Segmentify Slider **********************
function SegmentifyLogic() {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const title = $(this).find('a:not("".add-to-wishlist"")').attr('href');
                    const bandExist = await isItemExist(brandList, title);
                    const objectExist = await isItemExist(objectList, title);
                    // return;
                    if( (!bandExist || !objectExist) && $(this).find('.bottom-badges .dic-bugun-kargo').length === 0 ) {
                        // $(this).find('.bottom .price-main').append(codeHtml);
                        // $(this).find('.bottom .price-main .dic-free-shipment').css('transform', 'translateY(-10px)');
                        $(this).find('.bottom-badges').append(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}



CategoryPageLogic()
SearchPageLogic()
MainPageLogic()
SegmentifyLogic()
"
testing½hello,"html: <!-- Html -->h
css: *{

}
js: // Javascript"
test 2½ddddddddddddddddddddddddddsddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd,"html: <!-- Html -->
<div>
css: *{

}
js: // Javascript"
hh½gg,"html: <!-- Html -->h
css: *{

}
js: // Javascript"
testing½ddddddddd,"html: <!-- Html -->h
css: *{

}
js: // Javascript"
testing½details,"html: <!-- Html --> 
css: *{

}
js: // Javascript"
badge½ddddddddddddddd,"html: <!-- Html -->h
css: *{

}
js: // Javascript"
sory band banner½show a banner under the header in all pages.,"html: <!-- Html -->
<div class=""dic-alisveris-banner"">
  <div>
    Alışveriş deneyiminizi kusursuz hale getirmek için canla başla çalışıyoruz. Planlı altyapı bakımı nedeniyle sitemiz,
 <u><strong>18 Mart günü 01:00 ile 10:00 saatleri arasında</strong></u> erişime kapalı olacaktır.
  </div>
</div>
css: .dic-alisveris-banner {
    background-color: #df0000;
    display: flex;
    width: 100%;
    height: 100px;
    justify-content: center;
    align-items: center;
}

.dic-alisveris-banner div {
    max-width: 950px;
    text-align: center;
    font-size: 20px;
    line-height: 25px;
    color: #fff;
}

.dic-alisveris-banner strong {
    font-weight: bold !important;
}

@media (max-width: 992px) {
    .dic-alisveris-banner {
        background-color: #df0000;
        margin-top: 50px;
    }

    .dic-alisveris-banner div {
        max-width: 950px;
        text-align: center;
        font-size: 15px;
        line-height: 25px;
        color: #fff;
        padding: 13px;
    }

    section.fixed-search-container {
        margin-top: 60px !important;
    }
}
js: // Javascript
/*function OnInit () {
    Campaign.isCheckOn.PlacesEnabled = false;
}
console.log(""campaign logic"");
*/"
Night Private TV Basket Discount At Special TV Discount Campaign,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Gece Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 2.04.2024 20:00 – 3.04.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil ürünler için sepette indirim oranı değişmektedir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 18px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

function CategoryPageLogic(campaignName) {
  if(deeperInCode.isCategoryPage || isPFF_Page()) {
      if(deeperInCode.isDesktop) { // Desktop
          $('#category .products-list>li .product-wrapper').each( function(){
              const currentItemSKU = $(this).data('modelnumber');
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  let priceBrut = $(this).find('.price-box .price').text();
                  let comaPos = priceBrut.indexOf(',')
                  const price = priceBrut.substr(0, comaPos+2);
                  const discountAmount = parseFloat(price)*currentPercentage/100;
                  const resultedAmount = parseFloat(price)-discountAmount;
                  const jQueryBadge = $(badge);
                  jQueryBadge.find('#price').text(resultedAmount + 'TL')
                  if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                    $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                  }
              }
          })
          if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
              window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
              document.addEventListener(""onLoadingFinished"", async function() {
                  deeperInCodeFunctions[campaignName]();
              });
          }
      } else { // Mobile & Application
          $('.product-list>li.bg-white article.product-teaser-container').each( function(){
              const currentItemSKU = $(this).data('modelnumber');
              const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
              if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  let priceBrut = $(this).find('.wrapper-price .price').text();
                  let comaPos = priceBrut.indexOf(',')
                  if (comaPos === -1) {
                    comaPos = priceBrut.indexOf(' ') - 2;
                  }
                  const price = priceBrut.substr(0, comaPos+2);
                  const discountAmount = parseFloat(price)*currentPercentage/100;
                  const resultedAmount = parseFloat(price)-discountAmount;
                  const jQueryBadge = $(badge);
                  jQueryBadge.find('#price').text(resultedAmount + 'TL')
                  if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                    $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                  }
              }
              if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                  document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      // if($('#loading-wrapper').css('display')!=='none') return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          })
      }
  }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = parseFloat(price)-discountAmount;
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .price-main .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                               // $(this).find('.bottom .price-main').append(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = parseFloat(productPrice)-discountAmount;
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = parseFloat(productPrice)-discountAmount;
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = parseFloat(productPrice)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

CategoryPageLogic(campaignName)
SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Night bird product 2½gece bird product campaign tag test,"html: <!-- Start Html -->
<span class=""dic-gece-kusu-2""></span>
<!-- End Html -->
css: .dic-gece-kusu-2 {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/kadinlar.png);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-gece-kusu-2 {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Night Private TV Basket Discount V2½Gece Special TV Discount Campaign V2,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Gece Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 23.03.2024 20:00 – 24.03.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil ürünler için sepette indirim oranı değişmektedir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 18px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

function CategoryPageLogic(campaignName) {
  if(deeperInCode.isCategoryPage || isPFF_Page()) {
      if(deeperInCode.isDesktop) { // Desktop
          $('#category .products-list>li .product-wrapper').each( function(){
              const currentItemSKU = $(this).data('modelnumber');
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  let priceBrut = $(this).find('.price-box .price').text();
                  let comaPos = priceBrut.indexOf(',')
                  const price = priceBrut.substr(0, comaPos+2);
                  const discountAmount = parseFloat(price)*currentPercentage/100;
                  const resultedAmount = parseFloat(price)-discountAmount;
                  const jQueryBadge = $(badge);
                  jQueryBadge.find('#price').text(resultedAmount + 'TL')
                  if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                    $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                  }
              }
          })
          if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
              window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
              document.addEventListener(""onLoadingFinished"", async function() {
                  deeperInCodeFunctions[campaignName]();
              });
          }
      } else { // Mobile & Application
          $('.product-list>li.bg-white article.product-teaser-container').each( function(){
              const currentItemSKU = $(this).data('modelnumber');
              const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
              if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  let priceBrut = $(this).find('.wrapper-price .price').text();
                  let comaPos = priceBrut.indexOf(',')
                  if (comaPos === -1) {
                    comaPos = priceBrut.indexOf(' ') - 2;
                  }
                  const price = priceBrut.substr(0, comaPos+2);
                  const discountAmount = parseFloat(price)*currentPercentage/100;
                  const resultedAmount = parseFloat(price)-discountAmount;
                  const jQueryBadge = $(badge);
                  jQueryBadge.find('#price').text(resultedAmount + 'TL')
                  if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                    $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                  }
              }
              if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                  document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      // if($('#loading-wrapper').css('display')!=='none') return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          })
      }
  }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = parseFloat(price)-discountAmount;
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .price-main .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                               // $(this).find('.bottom .price-main').append(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = parseFloat(productPrice)-discountAmount;
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = parseFloat(productPrice)-discountAmount;
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = parseFloat(productPrice)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

CategoryPageLogic(campaignName)
SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Night Private TV Basket Discount V3½Gece Special TV Discount Campaign V3,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Gece Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 24.03.2024 20:00 – 25.03.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil ürünler için sepette indirim oranı değişmektedir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 18px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

function CategoryPageLogic(campaignName) {
  if(deeperInCode.isCategoryPage || isPFF_Page()) {
      if(deeperInCode.isDesktop) { // Desktop
          $('#category .products-list>li .product-wrapper').each( function(){
              const currentItemSKU = $(this).data('modelnumber');
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  let priceBrut = $(this).find('.price-box .price').text();
                  let comaPos = priceBrut.indexOf(',')
                  const price = priceBrut.substr(0, comaPos+2);
                  const discountAmount = parseFloat(price)*currentPercentage/100;
                  const resultedAmount = parseFloat(price)-discountAmount;
                  const jQueryBadge = $(badge);
                  jQueryBadge.find('#price').text(resultedAmount + 'TL')
                  if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                    $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                  }
              }
          })
          if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
              window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
              document.addEventListener(""onLoadingFinished"", async function() {
                  deeperInCodeFunctions[campaignName]();
              });
          }
      } else { // Mobile & Application
          $('.product-list>li.bg-white article.product-teaser-container').each( function(){
              const currentItemSKU = $(this).data('modelnumber');
              const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
              if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  let priceBrut = $(this).find('.wrapper-price .price').text();
                  let comaPos = priceBrut.indexOf(',')
                  if (comaPos === -1) {
                    comaPos = priceBrut.indexOf(' ') - 2;
                  }
                  const price = priceBrut.substr(0, comaPos+2);
                  const discountAmount = parseFloat(price)*currentPercentage/100;
                  const resultedAmount = parseFloat(price)-discountAmount;
                  const jQueryBadge = $(badge);
                  jQueryBadge.find('#price').text(resultedAmount + 'TL')
                  if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                    $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                  }
              }
              if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                  document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      // if($('#loading-wrapper').css('display')!=='none') return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          })
      }
  }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = parseFloat(price)-discountAmount;
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .price-main .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                               // $(this).find('.bottom .price-main').append(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = parseFloat(productPrice)-discountAmount;
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = parseFloat(productPrice)-discountAmount;
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = parseFloat(productPrice)-discountAmount;
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = parseFloat(productPrice)-discountAmount;
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

CategoryPageLogic(campaignName)
SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Web Special Basket % Outlet ½Sepet discount campaign,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web'e Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Web'e Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 1.04.2024 8:00 – 4.04.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil her ürün için sepette indirim oranı %20’dir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Renovated Product Product Price Campaign Label,"html: <!-- Start Html -->
<span class=""dic-yenilenmis-urun"">
</span>
<!-- End Html -->
css: .dic-yenilenmis-urun {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/yenilenmis_cihaz.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-yenilenmis-urun {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                if(renewed) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                if(renewed) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
async function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            let renewed = (await deeperInCode.getProductTitle()).toLowerCase().includes('yenilenmi')
            if(renewed) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            let renewed = (await deeperInCode.getProductTitle()).toLowerCase().includes('yenilenmi')
            if(renewed) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        let renewed = $(this).find('a:not("".add-to-wishlist"")').attr('href').includes('yenilenmi');
                        if(renewed) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    let renewed = $(this).find('a').attr('href').includes('yenilenmi')
                    if(renewed) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let renewed = $(this).find('a').attr('href').includes('yenilenmi')
            if(renewed) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
"SPECIAL BADGE FOR WEB ""E SPECIALIT","html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-webe-ozel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
9 installments special for 9 installments are badge.,"html: <!-- Start Html -->
<span class=""dic-9-taksit""></span>
<!-- End Html -->
css: .dic-9-taksit {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/9taksit.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 60px;
    width: 60px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-9-taksit {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
6 installments for 6 installments in 6 installments.,"html: <!-- Start Html -->
<span class=""dic-6-taksit""></span>
<!-- End Html -->
css: .dic-6-taksit {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/6taksit.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 60px;
    width: 60px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-6-taksit {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Together Together V2½ Al campaign Tag V2,"html: <!-- Start Html -->
<span class=""dic-birlikte-al""></span>
<!-- End Html -->
css: .dic-birlikte-al {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/birlikte_al.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-birlikte-al {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
"SPECIAL BADGE FOR WEB ""E SPECIAL TEST½WEB""","html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-webe-ozel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Good Price - Copy½i Price Campaign Tag,"html: <!-- Start Html -->
<span class=""dic-iyi-fiyat""></span>
<!-- End Html -->
css: .dic-iyi-fiyat {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/iyi_fiyat.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 0;
}
@media screen and (max-width: 600px) {
    .dic-iyi-fiyat {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
ACC 100 SKU List Special Badge,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-webe-ozel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Spring is a special v2 ½ spring special Badge fiction.V2,"html: <!-- Start Html -->
<span class=""dic-bahar-ozel""></span>
<!-- End Html -->
css: .dic-bahar-ozel {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/baharbadge.png);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 70px;
    width: 80px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-bahar-ozel {
        height: 65px;
        width: 70px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
"In installments, installments are badge for products.","html: <!-- Start Html -->
<span class=""dic-taksit""></span>
<!-- End Html -->
css: .dic-taksit {
    /* background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/9taksit.svg); */
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 60px;
    width: 60px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-taksit {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const MAX_TAKSIT_3 = 15000;
const MAX_TAKSIT_4 = 20000;
const MAX_TAKSIT_5 = 25000;
const MAX_TAKSIT_6 = 35000;
const MAX_TAKSIT_9 = 0xFFFFFFFF;

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function getInstallmentsCount(prodPrice) {
  if ( 0 < prodPrice && prodPrice <= 1000 ) {
    return 0;
  }
  else if (prodPrice < MAX_TAKSIT_3 ) {
    return 3;
  }
  else if (prodPrice < MAX_TAKSIT_4 ) {
    return 4;
  }
  else if (prodPrice < MAX_TAKSIT_5 ) {
    return 5;
  }
  else if (prodPrice < MAX_TAKSIT_6 ) {
    return 6;
  }
  else if (prodPrice < MAX_TAKSIT_9 ) {
    return 9;
  }
  else {
    throw 'undefined installment (taksit)';
  }
}

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
              const currentItemSKU = $(this).data('modelnumber');
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                const price = parseFloat(priceBrut.substr(0, comaPos+2));
                const installments = getInstallmentsCount(price);
                if (installments===0) return;

                const element = prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
                $(this).find('.dic-badge-container span.dic-taksit')
                .css( 'background-image',
                'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                );
                /**----------------------------------------------- */
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  let priceBrut = $(this).find('.wrapper-price .price').text();
                  let comaPos = priceBrut.indexOf(',')
                  const price = parseFloat(priceBrut);
                  const installments = getInstallmentsCount(price);
                  if (installments===0) return;

                  /**----------------------------------------------- */
                  prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                  /**----------------------------------------------- */
                  $(this).find('.dic-badge-container span.dic-taksit')
                  .css( 'background-image',
                  'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                  );
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        let priceBrut = deeperInCode.getProductPrice();
        let comaPos = priceBrut.indexOf(',')
        const price = parseFloat(priceBrut);
        const installments = getInstallmentsCount(price);
        if (installments===0) return;
        const bgUrl = 'https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg';
        if(deeperInCode.isDesktop) { // Desktop
          const currentItemSKU = parseInt(deeperInCode.getProductSKU());
          if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            /**----------------------------------------------- */
            prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
            /**----------------------------------------------- */
            deeperInCode.injectBrutCSS(`
            .dic-badge-container {
                left: 10px;
            }
            `)
            $('#product-sidebar .dic-badge-container span.dic-taksit').css( 'background-image', `url(${bgUrl})`);
          }
        } else { // Mobile
          const currentItemSKU = parseInt(deeperInCode.getProductSKU());
          if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            /**----------------------------------------------- */
            prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
            /**----------------------------------------------- */
            deeperInCode.injectBrutCSS(`
            .dic-badge-container {
                left: 10px;
            }
            `)
            $('#slider-stage .dic-badge-container span.dic-taksit').css( 'background-image', `url(${bgUrl})`);
          }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                          let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                          priceBrut+=',-';
                          let comaPos = priceBrut.indexOf(',')
                          const price = parseFloat(priceBrut.substr(0, comaPos+2));
                          const installments = getInstallmentsCount(price);
                          if (installments===0) return;

                          /**----------------------------------------------- */
                          prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                          /**----------------------------------------------- */
                          $(this).find('.dic-badge-container span.dic-taksit')
                          .css( 'background-image',
                          'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                          );
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      let priceBrut = $(this).find('.info-wrapper .price').text();
                      let comaPos = priceBrut.indexOf(',')
                      const price = parseFloat(priceBrut);
                      const installments = getInstallmentsCount(price);
                      if (installments===0) return;

                      // $(this).find('.photo-wrapper').prepend(codeHtml);
                      /**----------------------------------------------- */
                      prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                      /**----------------------------------------------- */
                      $(this).find('.dic-badge-container span.dic-taksit')
                      .css( 'background-image',
                      'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                      );
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        let priceBrut = $(this).find('.wrapper-price .price').text();
                        let comaPos = priceBrut.indexOf(',')
                        const price = parseFloat(priceBrut);
                        const installments = getInstallmentsCount(price);
                        if (installments===0) return;

                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                        $(this).find('.dic-badge-container span.dic-taksit')
                        .css( 'background-image',
                        'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                        );
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // installement code
                        let priceBrut = $(this).find('.price-box .new-price').text();
                        let comaPos = priceBrut.indexOf(',')
                        let price = parseFloat(priceBrut)
                        if(comaPos>-1)
                        {
                            price = parseFloat(priceBrut.substr(0, comaPos+2));
                        }
                        if(String(price).split('.').length>=2)
                        {
                          if(String(price).split('.')[1].length>=3)
                          {
                              price *= 1000;
                          }
                        }
                        const installments = getInstallmentsCount(price);
                        if (installments===0) return;
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                        $(this).find('.dic-badge-container span.dic-taksit')
                        .css( 'background-image',
                        'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                        );
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // installement code
                        let priceBrut = $(this).find('.price-box .new-price').text();
                        let comaPos = priceBrut.indexOf(',')
                        let price = parseFloat(priceBrut)
                        if(comaPos>-1)
                        {
                            price = parseFloat(priceBrut.substr(0, comaPos+2));
                        }
                        if(String(price).split('.').length>=2)
                        {
                          if(String(price).split('.')[1].length>=3)
                          {
                              price *= 1000;
                          }
                        }
                        const installments = getInstallmentsCount(price);
                        if (installments===0) return;
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                        $(this).find('.dic-badge-container span.dic-taksit')
                        .css( 'background-image',
                        'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                        );
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // installement code
                        let priceBrut = $(this).find('.price-box .new-price').text();
                        let comaPos = priceBrut.indexOf(',')
                        let price = parseFloat(priceBrut)
                        if(comaPos>-1)
                        {
                            price = parseFloat(priceBrut.substr(0, comaPos+2));
                        }
                        if(String(price).split('.').length>=2)
                        {
                          if(String(price).split('.')[1].length>=3)
                          {
                              price *= 1000;
                          }
                        }
                        const installments = getInstallmentsCount(price);
                        if (installments===0) return;
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                        $(this).find('.dic-badge-container span.dic-taksit')
                        .css( 'background-image',
                        'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                        );
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // installement code
                        let priceBrut = $(this).find('.price-box .new-price').text();
                        let comaPos = priceBrut.indexOf(',')
                        let price = parseFloat(priceBrut)
                        if(comaPos>-1)
                        {
                            price = parseFloat(priceBrut.substr(0, comaPos+2));
                        }
                        if(String(price).split('.').length>=2)
                        {
                          if(String(price).split('.')[1].length>=3)
                          {
                              price *= 1000;
                          }
                        }
                        const installments = getInstallmentsCount(price);
                        if (installments===0) return;
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                        $(this).find('.dic-badge-container span.dic-taksit')
                        .css( 'background-image',
                        'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                        );
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // installement code
                        let priceBrut = $(this).find('.price-box .new-price').text();
                        let comaPos = priceBrut.indexOf(',')
                        let price = parseFloat(priceBrut)
                        if(comaPos>-1)
                        {
                            price = parseFloat(priceBrut.substr(0, comaPos+2));
                        }
                        if(String(price).split('.').length>=2)
                        {
                          if(String(price).split('.')[1].length>=3)
                          {
                              price *= 1000;
                          }
                        }
                        const installments = getInstallmentsCount(price);
                        if (installments===0) return;
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                        $(this).find('.dic-badge-container span.dic-taksit')
                        .css( 'background-image',
                        'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
                        );
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              // installement code
              let priceBrut = $(this).find('.price-box .new-price').text();
              let comaPos = priceBrut.indexOf(',')
              let price = parseFloat(priceBrut)
              if(comaPos>-1)
              {
                  price = parseFloat(priceBrut.substr(0, comaPos+2));
              }
              if(String(price).split('.').length>=2)
              {
                if(String(price).split('.')[1].length>=3)
                {
                    price *= 1000;
                }
              }
              const installments = getInstallmentsCount(price);
              if (installments===0) return;
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
              $(this).find('.dic-badge-container span.dic-taksit')
              .css( 'background-image',
              'url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/'+String(installments)+'taksit.svg)'
              );
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Iftar Web Special½iftar Web Special Badge,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-webe-ozel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
̇Ftar perpet½i̇ftar sepet,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Web Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya, 23.03.2024 19:30 – 24.03.2024 05:30 arasında mediamarkt.com.tr’den mobil ve uygulamadan satın alınacak seçili ürünlerde geçerlidir. Kampanya stoklarla sınırlıdır. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
̇Ftar sepet v2½i̇ftar sepet v2,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Web Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya, 24.03.2024 19:30 – 25.03.2024 05:30 arasında mediamarkt.com.tr’den mobil ve uygulamadan satın alınacak seçili ürünlerde geçerlidir. Kampanya stoklarla sınırlıdır. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Night Bird 3 -dayaster Bird Product Campaign Label,"html: <!-- Start Html -->
<span class=""dic-gece-kusu""></span>
<!-- End Html -->
css: .dic-gece-kusu {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/gece_kusu_urunu.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-gece-kusu {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);"
Star of Tech 2 TV Advertising product½tv advertising product campaign tag,"html: <!-- Start Html -->
<span class=""dic-tv-reklam""></span>
<!-- End Html -->
css: .dic-tv-reklam {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/tv_reklam_urunu.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-tv-reklam {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
School Break V1½mda 9 installments for products are badge.,"html: <!-- Start Html -->
<span class=""dic-school-break""></span>
<!-- End Html -->
css: .dic-school-break {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/tatil_teknolojileri.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-school-break {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Discount in the basket V3½Sepet discount campaign V3,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 25.03.2024 16:00 – 13.05.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil ürünler için sepette indirim %15’dir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
School break v2½School break badge kurgusudur. V2,"html: <!-- Start Html -->
<span class=""dic-school-break""></span>
<!-- End Html -->
css: .dic-school-break {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/tatil_teknolojileri.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-school-break {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
School Break½School Break Badge fiction.This Badge will be used for the campaign.,"html: <!-- Start Html -->
<span class=""dic-school-break""></span>
<!-- End Html -->
css: .dic-school-break {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/tatil_teknolojileri_2.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-school-break {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Discount in Basket V4½Sepet discount campaign V4,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 26.03.2024 12:00 – 29.03.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil ürünler için sepette indirim oranı %10’dur. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir. Kampanya stoklarla sınırlıdır.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
"Shipping Free Trial, Free Trial","html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Kargo Bedava 
        <!--<span id=""price"">
            unset
        </span>-->
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Kargo Bedava</span>
        <!--<span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>-->
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Seçili Aksesuarlarda Kargo Bedava Fırsatı !
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #2c3f81 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #2c3f81 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Kargo Badge Manuel½Kargo Badge Manuel,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-kargo-bedava-manuel"">
        Kargo Bedava
    </span>
</div>
css: .dic-kargo-bedava-manuel {
    align-items: center;
    background-color: #2c3f81 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-kargo-bedava-manuel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-kargo-bedava-manuel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Night Birdajece Bird Product Campaign Label,"html: <!-- Start Html -->
<span class=""dic-gece-kusu""></span>
<!-- End Html -->
css: .dic-gece-kusu {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/gece_kusu_urunu.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-gece-kusu {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);"
SPRING CAMPAIGN 3 TV ADVERTISEMENT PRODUCT½TV Advertising Product Campaign Tag,"html: <!-- Start Html -->
<span class=""dic-tv-reklam""></span>
<!-- End Html -->
css: .dic-tv-reklam {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/tv_reklam_urunu.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-tv-reklam {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Samsung TV basket campaign 27-31.03½Sepet discount campaign,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 27.03.2024 17:00- 01.04.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil ürünler için sepette indirim oranı değişkenlik gösterebilir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
"Buyback online visibility band banner ""Band Banner Campaign","html: <div id=""dic-campaign-container"">

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Değiş Tokuş seçeneği ile 4.000 TL ek destek!</span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Değiş Tokuş seçeneği ile 4.000 TL ek destek!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
           Eskiyi Getir, Yeniyi Götür kampanyalarında eski cihazınızın parasal değeri, MediaMarkt mağazalarında yapılacak inceleme neticesinde belirlenecektir. Tüketiciler belirlenecek parasal değeri MediaMarkt mağazalarından MediaMarkt hediye kartı şeklinde alabilecek olup ilgili hediye kartları mevzuat hükümleri kapsamında MediaMarkt mağazalarından yapılacak ürün alımlarında kullanılabilecektir. Tüketicilerin https://www.mediamarkt.com.tr/ üzerinden yapacağı ön değerleme durumunda ise eski cihazın parasal değeri, Yenileme Merkezi’ne eski cihaz ulaştıktan sonra yapılacak inceleme neticesinde belirlenecek olup bu kapsamda tüketiciye yapılacak olan nihai teklifi tüketicinin kabul etmesi durumunda ödeme süreci Yenileme Merkezi tarafından işletilecektir. Kampanya getireceğiniz eski cihazın geri alım bedeline ek olarak iPhone 12 128 GB modellerinden birinin alımı halinde 4.000 TL tutarında ilave yenileme desteğine de hak kazanılabilecektir. Kampanya stoklarla sınırlıdır. Her müşteri kampanya dönemi boyunca, kampanyadan bir kez yararlanabilir.

    </section>
</div>
css: .dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
} 

.dic-banner .text {
    margin: auto 10%;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #fff;
    color: #000;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    box-shadow: 0 0 10px rgba(0, 0, 0, .3);
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        width: 100%;
    } 

    .dic-banner .text {
        margin: 0;
        line-height: 1;
        font-size: 16px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for the PDP page
 */

if(deeperInCode.isPDP) {
    const currentItemSKU = parseInt(deeperInCode.getProductSKU())
    if(deeperInCode.isDesktop) { // Desktop
        await deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav');
        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
            const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
            const discountAmount = parseFloat(productPrice)*currentPercentage/100;
            const resultedAmount = parseFloat(productPrice)-discountAmount;
            const jQueryBanner = $(banner);
            jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
            $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
            // binding the click event on the banner's button to its handler
            deeperInCode.SetPopupInnerHtml(popup)
            $('.dic-banner #show-details').click( function() {
                deeperInCode.SetPopupVisibility(true)
            // binding the click event on the popup's close button to its handler
            $('.dic-popup-basket-discount #close').click(function(){
                deeperInCode.SetPopupVisibility(false)
            })
            });
        }
    } else { // Mobile & Application
        await deeperInCode.waitUntilFieldCreated('.breadcrumb-list');
        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
            const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
            const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
            const discountAmount = parseFloat(productPrice)*currentPercentage/100;
            const resultedAmount = parseFloat(productPrice)-discountAmount;
            const jQueryBanner = $(banner);
            jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
            $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
            // binding the click event on the banner's button to its handler
            deeperInCode.SetPopupInnerHtml(popup)
            $('.dic-banner #show-details').click( function() {
                deeperInCode.SetPopupVisibility(true)
            // binding the click event on the popup's close button to its handler
            $('.dic-popup-basket-discount #close').click(function(){
                deeperInCode.SetPopupVisibility(false)
            })
            });
        }
    }
}


"
TV basket installation 280324½Sepet discount campaign,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 28.03.2024 12:00- 01.04.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil ürünler için sepette indirim oranı değişkenlik gösterebilir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
App only 30-31.03½Sepet discount campaign,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">App’e Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>App’e Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 30.03.2024 08:00-01.04.2024 07:30  tarihleri arasında sadece uygulamadan satın alınacak seçili ürünlerde geçerlidir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Iftar Web Special V2½iftar Web Special Badge,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-webe-ozel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Iftar Web Special V3½iftar Web Special Badge,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-webe-ozel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Samsung ai badge½samsung ai badge,"html: <!-- Start Html -->
<span class=""dic-samsung-ai""></span>
<!-- End Html -->
css: .dic-samsung-ai {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/samsung-ai.png);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-samsung-ai {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);"
Holiday Camp 1 2-4.04 - National½TV Advertising Product Campaign Tag,"html: <!-- Start Html -->
<span class=""dic-tv-reklam""></span>
<!-- End Html -->
css: .dic-tv-reklam {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/tv_reklam_urunu.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-tv-reklam {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
"Web Only - 2-3.04 ½Web""e Özel badge","html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-webe-ozel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Samsung TV basket campaign 3-15.04½Sepet discount campaign,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-sepette-indirim"">
        Sepette 
        <span id=""price"">
            unset
        </span>
    </span>

    <!-- BANNER CODE -->
    <span class=""dic-banner"">
        <span class=""text"">Web Özel Sepette</span>
        <span class=""discount-price"">
            0 TL
        </span>
        <button id=""show-details"">
            Detaylar
        </button>
    </span>


    <!-- POPUP CODE -->
    <section class=""dic-popup-basket-discount"">
        <button id=""close"">&#10006;</button>
        <h1>Geceye Özel Sepette İndirimler!</h1>
        <h4>Kampanya Koşulları:</h4>
        <p>
            Kampanya 03.04.2024 15:00- 16.04.2024 07:30 tarihleri arasında mediamarkt.com.tr’den ve mobil uygulamadan yapılacak alışverişlerde geçerlidir. Kampanyaya dahil ürünler için sepette indirim oranı değişkenlik gösterebilir. Başka sepet kampanyaları, indirim kodları ve kampanyalarla birleştirilemez. MediaMarkt; kampanyalar sırasında oluşabilecek öngörülemeyen değişiklikler nedeniyle ürün, fiyat değişimi yapma ve kampanyayı sona erdirme hakkını saklı tutar. Tipografik hatalardan ve yazım hatalarından MediaMarkt sorumlu değildir. MediaMarkt tarafından düzenlenen tüm kampanyalar tüketicilere yöneliktir. Kampanyalardan ticari gaye ile yararlanıldığı ve ticari alımların tespiti halinde kampanya kapsamındaki sipariş iptal edilebilir.
        </p>
    </section>
</div>
css: .dic-sepette-indirim {
    align-items: center;
    background-color: #090 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
}

.dic-sepette-indirim span#price {
    font-size: 18px;
    font-weight: 700;
    transform: skew(10deg);
}

.dic-banner {
    align-items: center;
    display: flex;
    height: 40px;
    line-height: 40px;
    margin: 10px 0;
    font-size: 18px;
    padding: 5px;
    background-color: #090 !important;
    color: #fff;
    width: calc(100% - 15px);
    justify-content: space-between;
    border-radius: 10px;
}

.dic-banner .text {
    margin: auto 10%;
    font-size: 18px;
}

.dic-banner .discount-price {
    font-size: 32px;
    font-weight: 700;
}

.dic-banner button {
    margin: auto 8%;
    border-radius: 7px;
    padding: 5px 20px;
    border: none;
    background-color: #000;
    color: #fff;
}

.dic-popup-basket-discount {
    border-radius: 10px;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding: 50px;
    height: 400px;
    width: 600px;
}

.dic-popup-basket-discount #close {
    position: absolute;
    top: -12px;
    right: -12px;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    border: none;
    background-color: #df0000;
    color: #fff;
    font-size: 22px;
    line-height: 32px;
}

.dic-popup-basket-discount h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    line-height: normal;
}
.dic-popup-basket-discount h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 10px;
}
.dic-popup-basket-discount p {
    color: #000;
    font-size: 14px;
    height: calc(100% - 100px);
    overflow-y: scroll;
    line-height: 1.4;
}

@media screen and (max-width: 600px) {
    .dic-banner {
        font-size: 14px;
        padding: 5px;
        width: 100%;
    }

    .dic-banner .text {
        margin: 0;
    }

    .dic-banner .discount-price {
        font-size: 24px;
    }

    .dic-banner button {
        margin: 0;
        border-radius: 6px;
    }
    .dic-popup-basket-discount {
        padding: 10px;
        width: 90%;
    }
    .dic-popup-basket-discount p{
        height: calc(100% - 150px);
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-sepette-indirim')[0].outerHTML;
const banner = $(codeHtml).find('.dic-banner')[0].outerHTML
const popup = $(codeHtml).find('.dic-popup-basket-discount')[0].outerHTML;

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.price-box .price').text();
                let comaPos = priceBrut.indexOf(',')
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                }
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .dic-sepette-indirim').length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let priceBrut = $(this).find('.wrapper-price .price').text();
                let comaPos = priceBrut.indexOf(',');
                if (comaPos === -1) {
                  comaPos = priceBrut.indexOf(' ') - 2;
                }
                const price = priceBrut.substr(0, comaPos+2);
                const discountAmount = parseFloat(price)*currentPercentage/100;
                const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.product-teaser-details .wrapper-price .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
                }
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                             let priceBrut = $(this).find('.product-box-bottom .price-main .mm-price').data('price');
                             priceBrut+=',-';
                             let comaPos = priceBrut.indexOf(',')
                             if (comaPos === -1) {
                               comaPos = priceBrut.indexOf(' ') - 2;
                             }
                             const price = priceBrut.substr(0, comaPos+2);
                             const discountAmount = parseFloat(price)*currentPercentage/100;
                             const resultedAmount = (parseFloat(price)-discountAmount).toFixed(2);
                             const jQueryBadge = $(badge);
                             jQueryBadge.find('#price').text(resultedAmount + 'TL')
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-sepette-indirim').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                  const productPrice = parseFloat($('meta[property=""price""]').attr('content'));
                  const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                  const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                  const jQueryBanner = $(banner);
                  jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                  $('.breadcrumb-list').before(jQueryBanner[0].outerHTML);
                  // binding the click event on the banner's button to its handler
                  deeperInCode.SetPopupInnerHtml(popup)
                  $('.dic-banner #show-details').click( function() {
                      deeperInCode.SetPopupVisibility(true)
                  // binding the click event on the popup's close button to its handler
                  $('.dic-popup-basket-discount #close').click(function(){
                      deeperInCode.SetPopupVisibility(false)
                  })
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a banner
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                        const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                        const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                        const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                        const jQueryBanner = $(badge);
                        jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                        $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                        // binding the click event on the banner's button to its handler
                        deeperInCode.SetPopupInnerHtml(popup)
                        $('.dic-banner #show-details').click( function() {
                            deeperInCode.SetPopupVisibility(true)
                        // binding the click event on the popup's close button to its handler
                        $('.dic-popup-basket-discount #close').click(function(){
                            deeperInCode.SetPopupVisibility(false)
                        })
                        });
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQueryBanner = $(badge);
                      jQueryBanner.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQueryBanner[0].outerHTML);
                      // binding the click event on the banner's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-banner #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-sepette-indirim').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-sepette-indirim').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the banner's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-banner #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
"
Marriage Campaign Badge½Marriage Campaign Badge Mavi,"html: <!-- Start Html -->
<span class=""dic-mda-indirim-blue""></span>
<!-- End Html -->
css: .dic-mda-indirim-blue {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/mda-indirim-blue.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-school-break {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider .slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
Apple 20W Bundle - April Together Together Buy Campaign Label,"html: <!-- Start Html -->
<span class=""dic-birlikte-al""></span>
<!-- End Html -->
css: .dic-birlikte-al {
    background-image: url(https://ux.mediamarkt.com.tr/MMFrontend/ecomm/img/badges/birlikte_al.svg);
    background-position: 0 0;
    background-repeat: no-repeat;
    background-size: 100%;
    display: inline-block;
    height: 55px;
    width: 55px;
    position: absolute;
    left: 10px;
    top: 10px;
    opacity: 1;
}
@media screen and (max-width: 600px) {
    .dic-birlikte-al {
        height: 50px;
        width: 50px;
    }
}
js: // Javascript
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

while(typeof deeperInCode.badgeCampignPriority === 'undefined') {
    await deeperInCode.Sleep(100)
}

const campaignName = 'fiction_' + Campaign.id;
let codeHtml = await ProcessHTML(false);
const myClass = $(codeHtml).filter( function(a){return $(this).prop('tagName') === 'SPAN'}).attr('class');
const priority = deeperInCode.badgeCampignPriority[myClass];
console.info('Campaign:', myClass, 'priority fiction_'+Campaign.id+':',priority, Campaign.id)

function prioritizeBadges(_this_, placeSelector, badgeContainerSelector, __badgeSelector, method) {
    const badgeContainer = placeSelector + ' ' + badgeContainerSelector;
    const badgeSelector = badgeContainer + ' ' + __badgeSelector;
    if($(_this_).find(badgeContainer).length>0) {
        // check priority
        let max_prio_camp = priority;
        let found_camp_count = 1000000;
        let max_prio_camp_class = myClass;
        let attempt = 0;
        // count the number of span (badges) in the badge container
        while(  $(_this_).find(badgeContainer+' .'+myClass).length === 0 &&
                found_camp_count>=deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT &&
                attempt < deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT*2+1
             ) {
          deeperInCode.badgeCampignPriority.remove(_this_, max_prio_camp_class)
          const obj = {
            ""max_prio_camp_class"": max_prio_camp_class,
            ""id"": Campaign.id,
            ""this"": $(_this_)[0]
          }
          console.log(obj)
          found_camp_count = 0;
          max_prio_camp_class = myClass;
          max_prio_camp = priority;
          $(_this_).find(badgeSelector).each( function() {
              const curr_class = $(this).attr('class');
              const curr_prio = deeperInCode.badgeCampignPriority.getPriority(curr_class);
              if(curr_prio>max_prio_camp) {
                  max_prio_camp = curr_prio;
                  max_prio_camp_class = curr_class;
              }
              found_camp_count++;
          })
          attempt++;
        }
        if($(_this_).find(badgeContainer+' .'+myClass).length === 0 && found_camp_count<deeperInCode.badgeCampignPriority.MAX_BADGE_COUNT) {
          if(priority<max_prio_camp) {
              $(_this_).find(badgeContainer).prepend(codeHtml);
          } else {
              $(_this_).find(badgeContainer).append(codeHtml);
          }
        }
    } else {
        const savedHtml = codeHtml;
        badgeContainerSelector = badgeContainerSelector.replaceAll('.', '').replaceAll('#', '');
        codeHtml = `<section class=""${badgeContainerSelector}"">
            ${codeHtml}
        </section>`;
        $(_this_).find(placeSelector)[method](codeHtml);
        codeHtml = savedHtml;
    }
}

// **************** Category Page **********************
function CategoryPageLogic(campaignName) {
    if(deeperInCode.isPLP) {
        if(deeperInCode.isDesktop) { // Desktop
            $('#category .products-list>li .product-wrapper').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, '.product-photo .photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                    deeperInCode.injectBrutCSS(`
                    .dic-badge-container {
                        left: 10px;
                    }
                    `)
                    /**----------------------------------------------- */
                }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onLoadingFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            $('.product-list>li.bg-white article.product-teaser-container').each( function(){
                const currentItemSKU = $(this).data('modelnumber');
                if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                    /**----------------------------------------------- */
                    prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                    /**----------------------------------------------- */
                }
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                        // if(await deeperInCode.limitExecutionByTime(1000)) return;
                        $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                        deeperInCodeFunctions[campaignName]();
                    });
                }
            })
        }
    }

}


// **************** PDP **********************
function PDPLogic(campaignName) {
    if(deeperInCode.isPDP) {
        if(deeperInCode.isDesktop) { // Desktop
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                /**----------------------------------------------- */
                prioritizeBadges(document, '#product-sidebar .preview', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        } else { // Mobile
            const currentItemSKU = parseInt(deeperInCode.getProductSKU());
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                // $('.pdp-slider .swiper-slide > figure').before(codeHtml)
                /**----------------------------------------------- */
                prioritizeBadges(document, '#slider-stage', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
                deeperInCode.injectBrutCSS(`
                .dic-badge-container {
                    left: 10px;
                }
                `)
            }
        }
    }
}


// **************** Search Page **********************
function SearchPageLogic(campaignName) {
    if(deeperInCode.isSearchPage) {
        // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
        deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
            if(res) {
                if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                    $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                        const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                            /**----------------------------------------------- */
                            prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                            /**----------------------------------------------- */
                        }
                    })
                    if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                        window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                        $(document).on(""onLoadingFinished"", async function() {
                            // if(await deeperInCode.limitExecutionByTime(1000)) return;
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                }
            }
        })
    }
}

// **************** Main Page **********************
function MainPageLogic(campaignName) {
    if(deeperInCode.isMainPage) {
        if(deeperInCode.isDesktop) { // Desktop
            deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
              if(res) {
                $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
              }
            })
            if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                document.addEventListener(""onSlideCarousel"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        } else { // Mobile & Application
            deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
              if(res) {
                $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                    let link = $(this).find('a').attr('href')
                    let pos = link.indexOf('.html')
                    let currentItemSKU = parseInt(link.substr(pos-7,7))
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
                if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                    window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                    document.addEventListener(""onSlideCarousel"", async function() {
                        deeperInCodeFunctions[campaignName]();
                    });
                }
              }
            })
        }
    }
}


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.injectBrutCSS(`
        .seg-body .seg-slider li.slick-slide {
            padding-top: 10px!important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li.slick-slide {
            padding-top: 10px !important;
        }
        #category .cmp_b2c5880fce000 .seg-body .seg-slider li .dic-badge-container {
            left: 0;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        // $(this).find('.photo-wrapper').prepend(codeHtml);
                        /**----------------------------------------------- */
                        $(this).find('.photo-wrapper').css('position','relative')
                        prioritizeBadges(this, '.photo-wrapper', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.injectBrutCSS(`
        .seg-slider-wrapper .dic-badge-container {
            top: 10px;
            left: 10px;
        }
        `)
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = $(this).data('product-id');
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.base-info').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, '.base-info', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('figure').append(codeHtml);
                        /**----------------------------------------------- */
                        prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                        /**----------------------------------------------- */
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                // $(this).find('.product-image').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, '.product-image', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              } else {
                // $(this).find('figure').append(codeHtml);
                /**----------------------------------------------- */
                prioritizeBadges(this, 'figure', '.dic-badge-container', 'span', 'prepend')
                /**----------------------------------------------- */
              }
            }
        })
      }
    });
}

CategoryPageLogic(campaignName);
PDPLogic(campaignName);
SearchPageLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
"Web Only - 04.04 ½Web""e Özel badge","html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web\'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = \'fiction_\' + Campaign.id;
const badge = $(codeHtml).find(\'.dic-webe-ozel\')[0].outerHTML;
const myClass = $(codeHtml).find(\'span\').attr(\'class\');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get(\'query\');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith(\'PFF_\'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $(\'#category .products-list>li .product-wrapper\').each( function(){
            const currentItemSKU = $(this).data(\'modelnumber\');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css(\'margin-top\',\'0\');
                deeperInCode.waitUntilFieldCreated(\'.product-price\')
                .then( res => {
                    if( $(this).find(\'.product-price .\'+myClass).length === 0 ) {
                        $(this).find(\'.product-price\').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window[\'isOnLoadingFinishedEventMounted_\'+campaignName]) {
            window[\'isOnLoadingFinishedEventMounted_\'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $(\'.product-list>li.bg-white article.product-teaser-container\').each( function(){
            const currentItemSKU = $(this).data(\'modelnumber\');
            const wasNotAddedBefore = $(this).find(\'.product-teaser-details .\'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find(\'.product-teaser-details .wrapper-price\').append(jQueryBadge[0].outerHTML);
            }
            if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($(\'#loading-wrapper\').css(\'display\')!==\'none\') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated(\'.wawlabs-loaded\')) return;
         deeperInCode.waitUntilFieldCreated(\'.mm-after-search .mm-search-right .mm-products .products-container .product-box\').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $(\'.mm-after-search .mm-search-right .mm-products .products-container .product-box\').each( function(){
                         const currentItemSKU = parseInt($(this).find(\'.product-image a\').data(\'gtm-event-ext\').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css(\'width\',\'100%\');
                             jQueryBadge.css(\'margin-top\',\'10px\');
                             if( $(this).find(\'.bottom .dic-webe-ozel\').length === 0 ) {
                               $(this).find(\'.bottom .price-main\').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window[\'isOnWawLabsLoadingFinishedEventMounted_\'+campaignName]) {
                         window[\'isOnWawLabsLoadingFinishedEventMounted_\'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated(\'.breadcrumbs-nav\').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $(\'.new-price-script-lib\').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated(\'.breadcrumb-list\').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated(\'#mina\')
                  .then( res => {
                    if (res) {
                        $(\'#mina\').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated(\'.criteo-content .slick-list .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.criteo-content .slick-list .slick-track .slick-slide\').each( async function(){
                    const currentItemSKU = parseInt($(this).find(\'.rm-product\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $(\'.breadcrumbs-nav\').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated(\'.criteo-content .slick-list .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.criteo-content .slick-list .slick-track .slick-slide\').each( function(){
                  const currentItemSKU = parseInt($(this).find(\'.rm-product\').data(\'product-id\'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($(\'meta[property=""product:price:amount""]\').attr(\'content\'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find(\'.discount-price\').text(resultedAmount + \'TL\')
                      $(\'.breadcrumbs-nav\').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge\'s button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $(\'.dic-badge #show-details\').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup\'s close button to its handler
                      $(\'.dic-popup-basket-discount #close\').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                        window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $(\'.product-list>li.bg-white .product-teaser-container figure .gece_kusu\').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated(\'.inGrid01\').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $(\'.inGrid01, .inGrid02\').each(function(){
            let currentItemSKU = $(this).data(\'product-id\');
            if( String($(this).data(\'product-id\')).indexOf(\'>\') > -1 ) {
              currentItemSKU = parseInt($(this).data(\'product-id\').split(\'>\')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find(\'.product-price .new-price\').text().replace(\' TL\',\'\').replace(\'.\',\'\'));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find(\'.price-main .mm-price\').data(\'price\')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find(\'.wrapper-price .price\').text().replace(\' TL\',\'\').replace(\'.\',\'\'));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find(\'#price\').text(resultedAmount + \'TL\')
                if( $(this).find(\'.price-main\').length > 0 && $(this).find(\'.price-main .dic-webe-ozel\').length === 0 ) {
                  $(this).find(\'.price-main\').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find(\'.new-price\').length > 0 && $(this).find(\'.new-price .dic-webe-ozel\').length === 0 )  {
                  $(this).find(\'.new-price\').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find(\'.wrapper-price\').length > 0 && $(this).find(\'.wrapper-price .dic-webe-ozel\').length === 0 )  {
                  $(this).find(\'.wrapper-price\').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge\'s button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $(\'.dic-badge #show-details\').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup\'s close button to its handler
                $(\'.dic-popup-basket-discount #close\').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated(\'.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info\').then( res => {
                if(res) {
                  $(\'.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info\').each( function(){
                    const currentItemSKU = parseInt($(this).data(\'gtm-impression-event-ext\').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find(\'.info-wrapper\').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css(\'height\', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window[\'isOnLoadingFinishedEventMounted_\'+campaignName]) {
                  window[\'isOnLoadingFinishedEventMounted_\'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated(\'.swiper-container .swiper-slide article.product-teaser-container\').then( res => {
                if(res) {
                  $(\'.swiper-container .swiper-slide article.product-teaser-container\').each( function(){
                        const currentItemSKU = parseInt($(this).find(\'a\').attr(\'href\').replace(\'.html\',\'\').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find(\'.\'+myClass).length === 0) {
                                $(this).find(\'.product-teaser-headline\').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css(\'height\', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                      window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated(\'.seg-slider .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.seg-slider .slick-track .slick-slide\').each( async function(){
                    const currentItemSKU = parseInt($(this).find(\'div.product-wrapper\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find(\'.product-price .infobox\').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated(\'.seg-body .seg-slider li\').then( res => {
            if(res) {
                $(\'.seg-body .seg-slider li\').each( async function(){
                    const currentItemSKU = parseInt($(this).find(\'div.product-wrapper\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find(\'.photo-wrapper\').css(\'position\',\'relative\')
                        $(this).find(\'.photo-wrapper\').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated(\'.seg-slider-wrapper .seg-slider .swiper-slide\').then( res => {
            if(res) {
                $(\'.seg-slider-wrapper .seg-slider .swiper-slide\').each( function(){
                    const currentItemSKU = parseInt($(this).find(\'a\').attr(\'href\').replace(\'.html\',\'\').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find(\'.\'+myClass).length === 0) {
                            $(this).find(\'figure\').append(codeHtml);
                        }
                    }
                    if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                        window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $(\'.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu\').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated(\'.criteo-content .slick-list .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.criteo-content .slick-list .slick-track .slick-slide\').each( async function(){
                    const currentItemSKU = parseInt($(this).find(\'.rm-product\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find(\'.photo-wrapper\').css(\'position\',\'relative\')
                        if ($(this).find(\'.\'+myClass).length === 0) {
                            $(this).find(\'.price-box\').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated(\'.criteo-content .slick-list .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.criteo-content .slick-list .slick-track .slick-slide\').each( function(){
                    const currentItemSKU = parseInt($(this).find(\'.rm-product\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find(\'.\'+myClass).length === 0) {
                            $(this).find(\'.wrapper-price\').prepend(codeHtml);
                        }
                    }
                    if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                        window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $(\'.product-list>li.bg-white .product-teaser-container figure .gece_kusu\').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated(\'.inGrid01\').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $(\'.inGrid01, .inGrid02\').each(function(){
            let currentItemSKU = $(this).data(\'product-id\');
            if( String($(this).data(\'product-id\')).indexOf(\'>\') > -1 ) {
              currentItemSKU = parseInt($(this).data(\'product-id\').split(\'>\')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find(\'.product-image\').length > 0 ) {
                $(this).find(\'.product-image\').append(codeHtml);
              } else {
                $(this).find(\'figure\').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
"Web Only - 05.04 ½Web""e Özel badge","html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = 'fiction_' + Campaign.id;
const badge = $(codeHtml).find('.dic-webe-ozel')[0].outerHTML;
const myClass = $(codeHtml).find('span').attr('class');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get('query');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith('PFF_'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $('#category .products-list>li .product-wrapper').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css('margin-top','0');
                deeperInCode.waitUntilFieldCreated('.product-price')
                .then( res => {
                    if( $(this).find('.product-price .'+myClass).length === 0 ) {
                        $(this).find('.product-price').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
            window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $('.product-list>li.bg-white article.product-teaser-container').each( function(){
            const currentItemSKU = $(this).data('modelnumber');
            const wasNotAddedBefore = $(this).find('.product-teaser-details .'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find('.product-teaser-details .wrapper-price').append(jQueryBadge[0].outerHTML);
            }
            if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($('#loading-wrapper').css('display')!=='none') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated('.wawlabs-loaded')) return;
         deeperInCode.waitUntilFieldCreated('.mm-after-search .mm-search-right .mm-products .products-container .product-box').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $('.mm-after-search .mm-search-right .mm-products .products-container .product-box').each( function(){
                         const currentItemSKU = parseInt($(this).find('.product-image a').data('gtm-event-ext').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css('width','100%');
                             jQueryBadge.css('margin-top','10px');
                             if( $(this).find('.bottom .dic-webe-ozel').length === 0 ) {
                               $(this).find('.bottom .price-main').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName]) {
                         window['isOnWawLabsLoadingFinishedEventMounted_'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated('.breadcrumbs-nav').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $('.new-price-script-lib').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated('.breadcrumb-list').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated('#mina')
                  .then( res => {
                    if (res) {
                        $('#mina').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                  const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($('meta[property=""product:price:amount""]').attr('content'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find('.discount-price').text(resultedAmount + 'TL')
                      $('.breadcrumbs-nav').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge's button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $('.dic-badge #show-details').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup's close button to its handler
                      $('.dic-popup-basket-discount #close').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find('.product-price .new-price').text().replace(' TL','').replace('.',''));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find('.price-main .mm-price').data('price')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find('.wrapper-price .price').text().replace(' TL','').replace('.',''));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find('#price').text(resultedAmount + 'TL')
                if( $(this).find('.price-main').length > 0 && $(this).find('.price-main .dic-webe-ozel').length === 0 ) {
                  $(this).find('.price-main').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.new-price').length > 0 && $(this).find('.new-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.new-price').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find('.wrapper-price').length > 0 && $(this).find('.wrapper-price .dic-webe-ozel').length === 0 )  {
                  $(this).find('.wrapper-price').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge's button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $('.dic-badge #show-details').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup's close button to its handler
                $('.dic-popup-basket-discount #close').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').then( res => {
                if(res) {
                  $('.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info').each( function(){
                    const currentItemSKU = parseInt($(this).data('gtm-impression-event-ext').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find('.info-wrapper').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css('height', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window['isOnLoadingFinishedEventMounted_'+campaignName]) {
                  window['isOnLoadingFinishedEventMounted_'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated('.swiper-container .swiper-slide article.product-teaser-container').then( res => {
                if(res) {
                  $('.swiper-container .swiper-slide article.product-teaser-container').each( function(){
                        const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find('.'+myClass).length === 0) {
                                $(this).find('.product-teaser-headline').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css('height', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                      window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.seg-slider .slick-track .slick-slide').then( res => {
            if(res) {
                $('.seg-slider .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.product-price .infobox').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated('.seg-body .seg-slider li').then( res => {
            if(res) {
                $('.seg-body .seg-slider li').each( async function(){
                    const currentItemSKU = parseInt($(this).find('div.product-wrapper').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find('.photo-wrapper').css('position','relative')
                        $(this).find('.photo-wrapper').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.seg-slider-wrapper .seg-slider .swiper-slide').then( res => {
            if(res) {
                $('.seg-slider-wrapper .seg-slider .swiper-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('a').attr('href').replace('.html','').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('figure').append(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( async function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find('.photo-wrapper').css('position','relative')
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.price-box').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated('.criteo-content .slick-list .slick-track .slick-slide').then( res => {
            if(res) {
                $('.criteo-content .slick-list .slick-track .slick-slide').each( function(){
                    const currentItemSKU = parseInt($(this).find('.rm-product').data('product-id'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find('.'+myClass).length === 0) {
                            $(this).find('.wrapper-price').prepend(codeHtml);
                        }
                    }
                    if (!window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName]) {
                        window['isOnLoadingFinishedEventMounted_Mobile_'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $('.product-list>li.bg-white .product-teaser-container figure .gece_kusu').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated('.inGrid01').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $('.inGrid01, .inGrid02').each(function(){
            let currentItemSKU = $(this).data('product-id');
            if( String($(this).data('product-id')).indexOf('>') > -1 ) {
              currentItemSKU = parseInt($(this).data('product-id').split('>')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find('.product-image').length > 0 ) {
                $(this).find('.product-image').append(codeHtml);
              } else {
                $(this).find('figure').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
4-5.04 iÖF demand for additional Badge,"html: <div id=""dic-campaign-container"">
    <!-- BADGE CODE -->
    <span class=""dic-webe-ozel"">
        Web\'e Özel
    </span>
</div>
css: .dic-webe-ozel {
    align-items: center;
    background-color: #009900 !important;
    border-radius: 6px 3px 6px 3px;
    display: flex;
    font-size: 14px;
    padding: 5px;
    color: #fff !important;
    width: calc(100% - 15px);
    justify-content: space-around;
    transform: skew(-10deg);
    margin-bottom: 10px !important;
    text-decoration: none !important;
    cursor: default !important;
    margin-top: 20px;
}

@media screen and (max-width: 992px) {
    .dic-webe-ozel {
        width: 90% !important;
        margin: auto;
    }
}
js: 
// delete deeperInCodeChecker.SkuEnabled
function OnInit() {
    Campaign.isCheckOn.SkuEnabled = false;
    Campaign.isCheckOn.PlacesEnabled = false;
}

let codeHtml = await ProcessHTML(false);
const campaignName = \'fiction_\' + Campaign.id;
const badge = $(codeHtml).find(\'.dic-webe-ozel\')[0].outerHTML;
const myClass = $(codeHtml).find(\'span\').attr(\'class\');

/**
 * this is for category pages and ff pages
 */

function isPFF_Page() {
  let { pathname, search } = window.location
  let queryString = search;
  let urlParams = new URLSearchParams(queryString);
  let parm = urlParams.get(\'query\');
  return deeperInCode.isSearchPage && (parm && parm.toUpperCase().startsWith(\'PFF_\'))
}

if(deeperInCode.isCategoryPage || isPFF_Page()) {
    if(deeperInCode.isDesktop) { // Desktop
        $(\'#category .products-list>li .product-wrapper\').each( function(){
            const currentItemSKU = $(this).data(\'modelnumber\');
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                jQueryBadge.css(\'margin-top\',\'0\');
                deeperInCode.waitUntilFieldCreated(\'.product-price\')
                .then( res => {
                    if( $(this).find(\'.product-price .\'+myClass).length === 0 ) {
                        $(this).find(\'.product-price\').append(jQueryBadge[0].outerHTML);
                    }
                });
            }
        })
        if (!window[\'isOnLoadingFinishedEventMounted_\'+campaignName]) {
            window[\'isOnLoadingFinishedEventMounted_\'+campaignName] = true;
            document.addEventListener(""onLoadingFinished"", async function() {
                deeperInCodeFunctions[campaignName]();
            });
        }
    } else { // Mobile & Application
        $(\'.product-list>li.bg-white article.product-teaser-container\').each( function(){
            const currentItemSKU = $(this).data(\'modelnumber\');
            const wasNotAddedBefore = $(this).find(\'.product-teaser-details .\'+myClass).length === 0;
            if(wasNotAddedBefore && Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const jQueryBadge = $(badge);
                $(this).find(\'.product-teaser-details .wrapper-price\').append(jQueryBadge[0].outerHTML);
            }
            if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                    // if(await deeperInCode.limitExecutionByTime(1000)) return;
                    // if($(\'#loading-wrapper\').css(\'display\')!==\'none\') return;
                    deeperInCodeFunctions[campaignName]();
                });
            }
        })
    }
}

/**
 * this is for search pages because the wawlabs is overrinding the original html
 */

 // **************** Search Page **********************
 function SearchPageLogic(campaignName) {
     if(deeperInCode.isSearchPage) {
         // if(! await deeperInCode.waitUntilFieldCreated(\'.wawlabs-loaded\')) return;
         deeperInCode.waitUntilFieldCreated(\'.mm-after-search .mm-search-right .mm-products .products-container .product-box\').then( res => {
             if(res) {
                 if(deeperInCode.isDesktop || deeperInCode.isMobile || deeperInCode.isApplication) { // Desktop && Mobile
                     $(\'.mm-after-search .mm-search-right .mm-products .products-container .product-box\').each( function(){
                         const currentItemSKU = parseInt($(this).find(\'.product-image a\').data(\'gtm-event-ext\').substr(7));
                         if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                             const jQueryBadge = $(badge);
                             jQueryBadge.css(\'width\',\'100%\');
                             jQueryBadge.css(\'margin-top\',\'10px\');
                             if( $(this).find(\'.bottom .dic-webe-ozel\').length === 0 ) {
                               $(this).find(\'.bottom .price-main\').after(jQueryBadge[0].outerHTML);
                             }
                         }
                     })
                     if (!window[\'isOnWawLabsLoadingFinishedEventMounted_\'+campaignName]) {
                         window[\'isOnWawLabsLoadingFinishedEventMounted_\'+campaignName] = true;
                         $(document).on(""onLoadingFinished"", async function() {
                             // if(await deeperInCode.limitExecutionByTime(1000)) return;
                             deeperInCodeFunctions[campaignName]();
                         });
                     }
                 }
             }
         })
     }
 }


/**
 * this is for the PDP page
 */

function PDPLogic(campaignName) {
  if(deeperInCode.isPDP) {
      const currentItemSKU = parseInt(deeperInCode.getProductSKU())
      if(deeperInCode.isDesktop) { // Desktop
          deeperInCode.waitUntilFieldCreated(\'.breadcrumbs-nav\').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  $(\'.new-price-script-lib\').after(jQuerybadge[0].outerHTML);
              }
            }
          })
      } else { // Mobile & Application
          deeperInCode.waitUntilFieldCreated(\'.breadcrumb-list\').then( res => {
            if(res) {
              if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                  const jQuerybadge = $(badge);
                  deeperInCode.waitUntilFieldCreated(\'#mina\')
                  .then( res => {
                    if (res) {
                        $(\'#mina\').before(jQuerybadge[0].outerHTML);
                    }
                  });
              }
            }
          });
      }
  }
}



// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
/*
  this portion of code is disabled for pdp page temporary because its is for un-understandable reasons pushes
  a badge in the top page nav-bar like if it was a badge
*/
if(deeperInCode.isPDP) return;
//*********************************************************************************************************
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated(\'.criteo-content .slick-list .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.criteo-content .slick-list .slick-track .slick-slide\').each( async function(){
                    const currentItemSKU = parseInt($(this).find(\'.rm-product\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQuerybadge = $(badge);
                        $(\'.breadcrumbs-nav\').before(jQuerybadge[0].outerHTML);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated(\'.criteo-content .slick-list .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.criteo-content .slick-list .slick-track .slick-slide\').each( function(){
                  const currentItemSKU = parseInt($(this).find(\'.rm-product\').data(\'product-id\'));
                  if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                      const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                      const productPrice = parseFloat($(\'meta[property=""product:price:amount""]\').attr(\'content\'));
                      const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                      const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                      const jQuerybadge = $(badge);
                      jQuerybadge.find(\'.discount-price\').text(resultedAmount + \'TL\')
                      $(\'.breadcrumbs-nav\').before(jQuerybadge[0].outerHTML);
                      // binding the click event on the badge\'s button to its handler
                      deeperInCode.SetPopupInnerHtml(popup)
                      $(\'.dic-badge #show-details\').click( function() {
                          deeperInCode.SetPopupVisibility(true)
                      // binding the click event on the popup\'s close button to its handler
                      $(\'.dic-popup-basket-discount #close\').click(function(){
                          deeperInCode.SetPopupVisibility(false)
                      })
                      });
                  }
                    if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                        window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $(\'.product-list>li.bg-white .product-teaser-container figure .gece_kusu\').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated(\'.inGrid01\').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(30);
        $(\'.inGrid01, .inGrid02\').each(function(){
            let currentItemSKU = $(this).data(\'product-id\');
            if( String($(this).data(\'product-id\')).indexOf(\'>\') > -1 ) {
              currentItemSKU = parseInt($(this).data(\'product-id\').split(\'>\')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                const currentPercentage = Campaign.skuList.filter(([sku]) => sku === currentItemSKU)[0][1];
                let productPrice = parseFloat($(this).find(\'.product-price .new-price\').text().replace(\' TL\',\'\').replace(\'.\',\'\'));
                if(isNaN(productPrice)) {
                  productPrice = $(this).find(\'.price-main .mm-price\').data(\'price\')*1000;
                }
                if(isNaN(productPrice)) {
                  productPrice = parseFloat($(this).find(\'.wrapper-price .price\').text().replace(\' TL\',\'\').replace(\'.\',\'\'));
                }
                const discountAmount = parseFloat(productPrice)*currentPercentage/100;
                const resultedAmount = (parseFloat(productPrice)-discountAmount).toFixed(2);
                const jQueryBadge = $(badge);
                jQueryBadge.find(\'#price\').text(resultedAmount + \'TL\')
                if( $(this).find(\'.price-main\').length > 0 && $(this).find(\'.price-main .dic-webe-ozel\').length === 0 ) {
                  $(this).find(\'.price-main\').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find(\'.new-price\').length > 0 && $(this).find(\'.new-price .dic-webe-ozel\').length === 0 )  {
                  $(this).find(\'.new-price\').after(jQueryBadge[0].outerHTML);
                }
                else if( $(this).find(\'.wrapper-price\').length > 0 && $(this).find(\'.wrapper-price .dic-webe-ozel\').length === 0 )  {
                  $(this).find(\'.wrapper-price\').append(jQueryBadge[0].outerHTML);
                }
                //
                // binding the click event on the badge\'s button to its handler
                deeperInCode.SetPopupInnerHtml(popup)
                $(\'.dic-badge #show-details\').click( function() {
                    deeperInCode.SetPopupVisibility(true)
                // binding the click event on the popup\'s close button to its handler
                $(\'.dic-popup-basket-discount #close\').click(function(){
                    deeperInCode.SetPopupVisibility(false)
                })
                });
            }
        })
      }
    });
}

  // **************** Main Page **********************
  function MainPageLogic(campaignName) {
      if(deeperInCode.isMainPage) {
          if(deeperInCode.isDesktop) { // Desktop
              deeperInCode.waitUntilFieldCreated(\'.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info\').then( res => {
                if(res) {
                  $(\'.product-container .products-carousel.cf .pc-wrapper .products-grid li .base-info\').each( function(){
                    const currentItemSKU = parseInt($(this).data(\'gtm-impression-event-ext\').substr(7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        const jQueryBadge = $(badge);
                        $(this).find(\'.info-wrapper\').prepend(jQueryBadge);
                        setTimeout( () => {
                            $(this).css(\'height\', $(this).outerHeight() + 7);
                        },50);
                    }
                  })
                }
              })
              if (!window[\'isOnLoadingFinishedEventMounted_\'+campaignName]) {
                  window[\'isOnLoadingFinishedEventMounted_\'+campaignName] = true;
                  document.addEventListener(""onSlideCarousel"", async function() {
                      // if(await deeperInCode.limitExecutionByTime(1000)) return;
                      deeperInCodeFunctions[campaignName]();
                  });
              }
          } else { // Mobile & Application
              deeperInCode.waitUntilFieldCreated(\'.swiper-container .swiper-slide article.product-teaser-container\').then( res => {
                if(res) {
                  $(\'.swiper-container .swiper-slide article.product-teaser-container\').each( function(){
                        const currentItemSKU = parseInt($(this).find(\'a\').attr(\'href\').replace(\'.html\',\'\').slice(-7));
                        if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                            const jQueryBadge = $(badge);
                            if ($(this).find(\'.\'+myClass).length === 0) {
                                $(this).find(\'.product-teaser-headline\').after(jQueryBadge);
                                setTimeout( () => {
                                    $(this).css(\'height\', $(this).outerHeight() + 7);
                                },50);
                            }
                        }
                  })
                  if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                      window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                      document.addEventListener(""onSlideCarousel"", async function() {
                          deeperInCodeFunctions[campaignName]();
                      });
                  }
                }
              })
          }
      }
  }


// **************** Segmentify Slider **********************
function SegmentifyLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated(\'.seg-slider .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.seg-slider .slick-track .slick-slide\').each( async function(){
                    const currentItemSKU = parseInt($(this).find(\'div.product-wrapper\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find(\'.product-price .infobox\').after(codeHtml);
                    }
                })
            }
        })
        deeperInCode.waitUntilFieldCreated(\'.seg-body .seg-slider li\').then( res => {
            if(res) {
                $(\'.seg-body .seg-slider li\').each( async function(){
                    const currentItemSKU = parseInt($(this).find(\'div.product-wrapper\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        $(this).find(\'.photo-wrapper\').css(\'position\',\'relative\')
                        $(this).find(\'.photo-wrapper\').prepend(codeHtml);
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated(\'.seg-slider-wrapper .seg-slider .swiper-slide\').then( res => {
            if(res) {
                $(\'.seg-slider-wrapper .seg-slider .swiper-slide\').each( function(){
                    const currentItemSKU = parseInt($(this).find(\'a\').attr(\'href\').replace(\'.html\',\'\').slice(-7));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        if ($(this).find(\'.\'+myClass).length === 0) {
                            $(this).find(\'figure\').append(codeHtml);
                        }
                    }
                    if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                        window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $(\'.seg-slider-wrapper .seg-slider .swiper-slide .product-teaser-container figure .gece_kusu\').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
}

// **************** Criteo Slider **********************
function CriteoLogic(campaignName) {
    if(deeperInCode.isDesktop) { // Desktop
        deeperInCode.waitUntilFieldCreated(\'.criteo-content .slick-list .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.criteo-content .slick-list .slick-track .slick-slide\').each( async function(){
                    const currentItemSKU = parseInt($(this).find(\'.rm-product\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
                        // $(this).find(\'.photo-wrapper\').css(\'position\',\'relative\')
                        if ($(this).find(\'.\'+myClass).length === 0) {
                            $(this).find(\'.price-box\').append(codeHtml);
                        }
                    }
                })
            }
        })
    } else { // Mobile & Application
        deeperInCode.waitUntilFieldCreated(\'.criteo-content .slick-list .slick-track .slick-slide\').then( res => {
            if(res) {
                $(\'.criteo-content .slick-list .slick-track .slick-slide\').each( function(){
                    const currentItemSKU = parseInt($(this).find(\'.rm-product\').data(\'product-id\'));
                    if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {                        
                        if ($(this).find(\'.\'+myClass).length === 0) {
                            $(this).find(\'.wrapper-price\').prepend(codeHtml);
                        }
                    }
                    if (!window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName]) {
                        window[\'isOnLoadingFinishedEventMounted_Mobile_\'+campaignName] = true;
                        document.addEventListener(""onPlpLoadNewItemsFinished"", async function() {
                            if(await deeperInCode.limitExecutionByTime(1000)) return;
                            $(\'.product-list>li.bg-white .product-teaser-container figure .gece_kusu\').remove();
                            deeperInCodeFunctions[campaignName]();
                        });
                    }
                })
            }
        })
    }
    deeperInCode.waitUntilFieldCreated(\'.inGrid01\').then( async (res) => {
      if(res) {
        await deeperInCode.Sleep(250);
        $(\'.inGrid01, .inGrid02\').each(function(){
            let currentItemSKU = $(this).data(\'product-id\');
            if( String($(this).data(\'product-id\')).indexOf(\'>\') > -1 ) {
              currentItemSKU = parseInt($(this).data(\'product-id\').split(\'>\')[0]);
            }
            if(Campaign.skuList.map(a=>a[0]).includes(currentItemSKU)) {
              if( $(this).find(\'.product-image\').length > 0 ) {
                $(this).find(\'.product-image\').append(codeHtml);
              } else {
                $(this).find(\'figure\').append(codeHtml);
              }
            }
        })
      }
    });
}


SearchPageLogic(campaignName);
PDPLogic(campaignName);
CriteoLogic(campaignName);
MainPageLogic(campaignName);
SegmentifyLogic(campaignName);
CriteoLogic(campaignName);
"
